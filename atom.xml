<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小潘同学的教室</title>
  
  <subtitle>黎明来临之前没有人知道还要等多久</subtitle>
  <link href="https://xiaopantongxue816.github.io/atom.xml" rel="self"/>
  
  <link href="https://xiaopantongxue816.github.io/"/>
  <updated>2020-09-10T07:11:08.670Z</updated>
  <id>https://xiaopantongxue816.github.io/</id>
  
  <author>
    <name>小潘同学</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>统计linux主机的CPU内存</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/09/%E7%BB%9F%E8%AE%A1%E5%A4%9A%E5%8F%B0linux%E4%B8%BB%E6%9C%BA%E7%9A%84CPU%E5%86%85%E5%AD%98/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/09/%E7%BB%9F%E8%AE%A1%E5%A4%9A%E5%8F%B0linux%E4%B8%BB%E6%9C%BA%E7%9A%84CPU%E5%86%85%E5%AD%98/</id>
    <published>2020-09-09T02:30:41.000Z</published>
    <updated>2020-09-10T07:11:08.670Z</updated>
    
    <content type="html"><![CDATA[<h1 id="snmp协议（调用python）"><a href="#snmp协议（调用python）" class="headerlink" title="snmp协议（调用python）"></a>snmp协议（调用python）</h1><p><strong>结果：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost cpu_test]# python3 cpu_SNMP.py </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;192.168.220.10&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">系统信息</span><br><span class="line">Linux localhost.localdomain 3.10.0-1127.el7.x86_64 #1 SMP Tue Mar 31 23:36:51 UTC 2020 x86_64</span><br><span class="line">系统负载</span><br><span class="line">load(5min):  0.12 ,load(10min):  0.04 ,load(15min):  0.05</span><br><span class="line">网卡流量</span><br><span class="line">lo : RX: 19524.91 KB       TX: 19524.91 KB </span><br><span class="line">ens33 : RX: 61088.05 KB       TX: 6388.18 KB </span><br><span class="line">内存使用率</span><br><span class="line">Mem_Used &#x3D; 86.92%            Swap_Used &#x3D; 13.54%         </span><br><span class="line">run time: 0.23 s</span><br><span class="line">[root@localhost cpu_test]# </span><br></pre></td></tr></table></figure><h3 id="安装-snmp（CentOS7）"><a href="#安装-snmp（CentOS7）" class="headerlink" title="安装 snmp（CentOS7）"></a><strong>安装 snmp（CentOS7）</strong></h3><p>查看一下Linux主机有没有安装了snmp服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa |grep snmp</span><br></pre></td></tr></table></figure><p>如果安装了会出现下边一些东西：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net-snmp-5.5-49.el6.i686</span><br><span class="line">net-snmp-libs-5.5-49.el6.i686</span><br><span class="line">php-snmp-5.3.3-27.el6_5.i686</span><br></pre></td></tr></table></figure><p>如果没有就执行命令安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum install -y net-snmp</span><br><span class="line"></span><br><span class="line">yum install -y net-snmp-devel</span><br><span class="line"></span><br><span class="line">yum install -y net-snmp-libs</span><br><span class="line"></span><br><span class="line">yum install -y net-snmp-perl</span><br><span class="line"></span><br><span class="line">yum install -y net-snmp-utils</span><br><span class="line"></span><br><span class="line">yum install -y mrtg</span><br></pre></td></tr></table></figure><p><strong>启动</strong></p><p>再次查看一下Linux主机有没有安装了snmp服务，确保安装成功后启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service snmpd start </span><br></pre></td></tr></table></figure><p>这个时候也许会报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Redirecting to &#x2F;bin&#x2F;systemctl start snmpd.service</span><br></pre></td></tr></table></figure><p>上网查了一下说是使用的是Centos7或者 Fedora高版本，启用服务变化了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;bin</span><br><span class="line">systemctl start snmpd.service</span><br></pre></td></tr></table></figure><p>查看状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># running了</span><br><span class="line">service snmpd status</span><br></pre></td></tr></table></figure><p><strong>配置</strong></p><p>（yum安装snmpd的配置文件为/etc/snmp/snmpd.conf ，备份一份snmpd.conf.bak）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;etc&#x2F;snmp&#x2F;snmpd.conf &#x2F;etc&#x2F;snmp&#x2F;snmpd.conf.bak</span><br><span class="line">vim &#x2F;etc&#x2F;snmp&#x2F;snmpd.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、配置snmp团体名（默认是public）: com2sec notConfigUser default public 建议更改public为您使用的团体名称</span><br><span class="line">2、将access notConfigGroup &quot;&quot; any noauth exact systemview none none更改为access notConfigGroup &quot;&quot; any noauth exact all none none</span><br><span class="line">3、将如下两行前面的注释去掉</span><br><span class="line">## incl&#x2F;excl subtree maskview all included .1 80## -or just the mib2 tree-view mib2 included .iso.org.dod.internet.mgmt.mib-2 fc</span><br><span class="line">4、将下面一行前面的注释去掉</span><br><span class="line">#access notConfigGroup &quot;&quot; any noauth exact roview rwview noneaccess notConfigGroup &quot;&quot; any noath exact mib2 none none</span><br></pre></td></tr></table></figure><h3 id="重启snmpd服务"><a href="#重启snmpd服务" class="headerlink" title="重启snmpd服务"></a><strong>重启snmpd服务</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;bin</span><br><span class="line">[root@localhost bin]# systemctl restart snmpd.service</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>把服务加到开机启动中，开机自动运行</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# chkconfig snmpd on </span><br></pre></td></tr></table></figure><p><strong>查看是否已经成功启动：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# netstat -ln | grep 161</span><br><span class="line"></span><br><span class="line">udp        0      0 0.0.0.0:161             0.0.0.0:*   </span><br></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# snmpwalk -v 2c -c public 192.168.220.10 1.3.6.1.2.1.1.1</span><br><span class="line">Timeout: No Response from 192.168.220.10</span><br><span class="line">[root@localhost ~]# snmpwalk -v 2c -c pjy 192.168.220.10 1.3.6.1.2.1.1.1      </span><br><span class="line">SNMPv2-MIB::sysDescr.0 &#x3D; STRING: Linux localhost.localdomain 3.10.0-1127.el7.x86_64 #1 SMP Tue Mar 31 23:36:51 UTC 2020 x86_64</span><br></pre></td></tr></table></figure><p>安装参考：</p><p><a href="https://www.linuxprobe.com/snmp-update.html">https://www.linuxprobe.com/snmp-update.html</a> </p><p><a href="https://www.cnblogs.com/yujianadu/p/10395285.html">https://www.cnblogs.com/yujianadu/p/10395285.html</a></p><p>配置参考：</p><p><a href="https://jingyan.baidu.com/article/066074d64b303ac3c21cb0ef.html">https://jingyan.baidu.com/article/066074d64b303ac3c21cb0ef.html</a></p><p>网上原始参考代码：<a href="https://blog.csdn.net/yannanxiu/article/details/55045108?utm_source=blogxgwz0&amp;utm_medium=distribute.pc_relevant.none-task-blog-title-3&amp;spm=1001.2101.3001.4242">https://blog.csdn.net/yannanxiu/article/details/55045108?utm_source=blogxgwz0&amp;utm_medium=distribute.pc_relevant.none-task-blog-title-3&amp;spm=1001.2101.3001.4242</a></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">filename:snmp_test.py</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">说明：</span></span><br><span class="line"><span class="string">使用系统的 snmpwalk 来查询设备信息，需要先安装 snmp</span></span><br><span class="line"><span class="string">代码 Windows 和 Linux 通用</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Windows cmd 调用示例：snmpwalk -v 2c -c public 127.0.0.1 1.3.6.1.2.1.1.1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Windows cmd 下查看某主机（192.168.132.130）信息示例：</span></span><br><span class="line"><span class="string">snmpwalk -v 2c -c public 192.168.132.130 1.3.6.1.2.1.1.1</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;Windows&#x27;</span> == platform.system():</span><br><span class="line">    hosts = [<span class="string">&#x27;192.168.132.130&#x27;</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 在虚拟机运行时则查看本地</span></span><br><span class="line">    hosts = [<span class="string">&#x27;127.0.0.1&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">snmpWalk</span>(<span class="params">host, oid</span>):</span></span><br><span class="line">    result = os.popen(<span class="string">&#x27;snmpwalk -v 2c -c public &#x27;</span> + host + <span class="string">&#x27; &#x27;</span> + oid).read().split(<span class="string">&#x27;\n&#x27;</span>)[:<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取负载信息</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSystem</span>(<span class="params">host</span>):</span></span><br><span class="line">    system = <span class="string">&#x27;:&#x27;</span>.join(snmpWalk(host, <span class="string">&#x27;system&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>:]).strip()</span><br><span class="line">    <span class="keyword">return</span> system</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取负载信息</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getLoad</span>(<span class="params">host, loid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;系统负载&quot;&quot;&quot;</span></span><br><span class="line">    load_oids = <span class="string">&#x27;1.3.6.1.4.1.2021.10.1.3.&#x27;</span> + str(loid)</span><br><span class="line">    <span class="keyword">return</span> snmpWalk(host, load_oids)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getLoads</span>(<span class="params">host</span>):</span></span><br><span class="line">    load1 = getLoad(host, <span class="number">1</span>)</span><br><span class="line">    load10 = getLoad(host, <span class="number">2</span>)</span><br><span class="line">    load15 = getLoad(host, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> load1, load10, load15</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取网卡流量</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkDevices</span>(<span class="params">host</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取网络设备信息&quot;&quot;&quot;</span></span><br><span class="line">    device_mib = snmpWalk(host, <span class="string">&#x27;RFC1213-MIB::ifDescr&#x27;</span>)</span><br><span class="line">    device_list = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> device_mib:</span><br><span class="line">        device_list.append(item.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>].strip())</span><br><span class="line">    <span class="keyword">return</span> device_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkData</span>(<span class="params">host, oid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取网络流量&quot;&quot;&quot;</span></span><br><span class="line">    data_mib = snmpWalk(host, oid)</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data_mib:</span><br><span class="line">        byte = float(item.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>].strip())</span><br><span class="line">        data.append(str(round(byte / <span class="number">1024</span>, <span class="number">2</span>)) + <span class="string">&#x27; KB&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkInfo</span>(<span class="params">host</span>):</span></span><br><span class="line">    device_list = getNetworkDevices(host)</span><br><span class="line">    <span class="comment"># 流入流量</span></span><br><span class="line">    inside = getNetworkData(host, <span class="string">&#x27;IF-MIB::ifInOctets&#x27;</span>)</span><br><span class="line">    <span class="comment"># 流出流量</span></span><br><span class="line">    outside = getNetworkData(host, <span class="string">&#x27;IF-MIB::ifOutOctets&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> device_list, inside, outside</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 内存使用率</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSwapTotal</span>(<span class="params">host</span>):</span></span><br><span class="line">    swap_total = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memTotalSwap.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> swap_total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSwapUsed</span>(<span class="params">host</span>):</span></span><br><span class="line">    swap_avail = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memAvailSwap.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    swap_total = getSwapTotal(host)</span><br><span class="line">    swap_used = str(round(((float(swap_total) - float(swap_avail)) / float(swap_total)) * <span class="number">100</span>, <span class="number">2</span>)) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> swap_used</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemTotal</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_total = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memTotalReal.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> mem_total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemUsed</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_total = getMemTotal(host)</span><br><span class="line">    mem_avail = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memAvailReal.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    mem_used = str(round(((float(mem_total) - float(mem_avail)) / float(mem_total)) * <span class="number">100</span>, <span class="number">2</span>)) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> mem_used</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemInfo</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_used = getMemUsed(host)</span><br><span class="line">    swap_used = getSwapUsed(host)</span><br><span class="line">    <span class="keyword">return</span> mem_used, swap_used</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="keyword">for</span> host <span class="keyword">in</span> hosts:</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&#x27;=&#x27;</span> * <span class="number">10</span> + host + <span class="string">&#x27;=&#x27;</span> * <span class="number">10</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        print(<span class="string">&quot;系统信息&quot;</span>)</span><br><span class="line">        system = getSystem(host)</span><br><span class="line">        print(system)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&quot;系统负载&quot;</span>)</span><br><span class="line">        load1, load10, load15 = getLoads(host)</span><br><span class="line">        print(<span class="string">&#x27;load(5min): %s ,load(10min): %s ,load(15min): %s&#x27;</span> % (load1, load10, load15))</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&quot;网卡流量&quot;</span>)</span><br><span class="line">        device_list, inside, outside = getNetworkInfo(host)</span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> enumerate(device_list):</span><br><span class="line">            print(<span class="string">&#x27;%s : RX: %-15s   TX: %s &#x27;</span> % (device_list[i], inside[i], outside[i]))</span><br><span class="line"></span><br><span class="line">        mem_used, swap_used = getMemInfo(host)</span><br><span class="line">        print(<span class="string">&quot;内存使用率&quot;</span>)</span><br><span class="line">        print(<span class="string">&#x27;Mem_Used = %-15s   Swap_Used = %-15s&#x27;</span> % (mem_used, swap_used))</span><br><span class="line"></span><br><span class="line">        end = time.time()</span><br><span class="line">        print(<span class="string">&#x27;run time:&#x27;</span>, round(end - start, <span class="number">2</span>), <span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="保存到redis中（更新代码）"><a href="#保存到redis中（更新代码）" class="headerlink" title="保存到redis中（更新代码）"></a>保存到redis中（更新代码）</h3><p>下载redis库：<a href="https://github.com/andymccurdy/redis-py">https://github.com/andymccurdy/redis-py</a> </p><p>上传到/root目录下解压还会得到一个redis-py-master文件夹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unzip redis-py-master.zip -d .&#x2F;</span><br><span class="line">cd redis-py-master</span><br><span class="line">sudo python setup.py install </span><br></pre></td></tr></table></figure><p>测试：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3</span><br><span class="line">&gt;&gt;&gt;import redis</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><h5 id="（重要）启动或重启服务"><a href="#（重要）启动或重启服务" class="headerlink" title="（重要）启动或重启服务"></a>（重要）启动或重启服务</h5><p><strong>注意如果得不到某一台机子的response需要启动或重启snmpd服务</strong></p><p>安装参考原文：<a href="https://blog.csdn.net/wwd0501/article/details/80735111?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param">https://blog.csdn.net/wwd0501/article/details/80735111?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param</a></p><p><strong>转化为json格式string存储</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">filename:snmp_test.py</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">说明：</span></span><br><span class="line"><span class="string">使用系统的 snmpwalk 来查询设备信息，需要先安装 snmp</span></span><br><span class="line"><span class="string">代码 Windows 和 Linux 通用</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Windows cmd 调用示例：snmpwalk -v 2c -c public 127.0.0.1 1.3.6.1.2.1.1.1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Windows cmd 下查看某主机（192.168.132.130）信息示例：</span></span><br><span class="line"><span class="string">snmpwalk -v 2c -c public 192.168.132.130 1.3.6.1.2.1.1.1</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> redis   <span class="comment"># 导入redis模块，通过python操作redis 也可以直接在redis主机的服务端操作缓存数据库</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;Linux&#x27;</span> == platform.system():</span><br><span class="line">    hosts = [<span class="string">&#x27;160.0.3.1&#x27;</span>,<span class="string">&#x27;160.0.3.5&#x27;</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 在虚拟机运行时则查看本地</span></span><br><span class="line">    hosts = [<span class="string">&#x27;160.0.3.1&#x27;</span>,<span class="string">&#x27;160.0.3.5&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">snmpWalk</span>(<span class="params">host, oid</span>):</span></span><br><span class="line">    result = os.popen(<span class="string">&#x27;snmpwalk -v 2c -c public &#x27;</span> + host + <span class="string">&#x27; &#x27;</span> + oid).read().split(<span class="string">&#x27;\n&#x27;</span>)[:<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取负载信息</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSystem</span>(<span class="params">host</span>):</span></span><br><span class="line">    system = <span class="string">&#x27;:&#x27;</span>.join(snmpWalk(host, <span class="string">&#x27;system&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>:]).strip()</span><br><span class="line">    <span class="keyword">return</span> system</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取负载信息</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getLoad</span>(<span class="params">host, loid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;系统负载&quot;&quot;&quot;</span></span><br><span class="line">    load_oids = <span class="string">&#x27;1.3.6.1.4.1.2021.10.1.3.&#x27;</span> + str(loid)</span><br><span class="line">    <span class="keyword">return</span> snmpWalk(host, load_oids)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getLoads</span>(<span class="params">host</span>):</span></span><br><span class="line">    load1 = getLoad(host, <span class="number">1</span>)</span><br><span class="line">    load10 = getLoad(host, <span class="number">2</span>)</span><br><span class="line">    load15 = getLoad(host, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> load1, load10, load15</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取网卡流量</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkDevices</span>(<span class="params">host</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取网络设备信息&quot;&quot;&quot;</span></span><br><span class="line">    device_mib = snmpWalk(host, <span class="string">&#x27;RFC1213-MIB::ifDescr&#x27;</span>)</span><br><span class="line">    device_list = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> device_mib:</span><br><span class="line">        device_list.append(item.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>].strip())</span><br><span class="line">    <span class="keyword">return</span> device_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkData</span>(<span class="params">host, oid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取网络流量&quot;&quot;&quot;</span></span><br><span class="line">    data_mib = snmpWalk(host, oid)</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data_mib:</span><br><span class="line">        byte = float(item.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>].strip())</span><br><span class="line">        data.append(str(round(byte / <span class="number">1024</span>, <span class="number">2</span>)) + <span class="string">&#x27; KB&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkInfo</span>(<span class="params">host</span>):</span></span><br><span class="line">    device_list = getNetworkDevices(host)</span><br><span class="line">    <span class="comment"># 流入流量</span></span><br><span class="line">    inside = getNetworkData(host, <span class="string">&#x27;IF-MIB::ifInOctets&#x27;</span>)</span><br><span class="line">    <span class="comment"># 流出流量</span></span><br><span class="line">    outside = getNetworkData(host, <span class="string">&#x27;IF-MIB::ifOutOctets&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> device_list, inside, outside</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 内存使用率</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSwapTotal</span>(<span class="params">host</span>):</span></span><br><span class="line">    swap_total = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memTotalSwap.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> swap_total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSwapUsed</span>(<span class="params">host</span>):</span></span><br><span class="line">    swap_avail = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memAvailSwap.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    swap_total = getSwapTotal(host)</span><br><span class="line">    swap_used = str(round(((float(swap_total) - float(swap_avail)) / float(swap_total)) * <span class="number">100</span>, <span class="number">2</span>)) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> swap_used</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemTotal</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_total = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memTotalReal.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> mem_total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemUsed</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_total = getMemTotal(host)</span><br><span class="line">    mem_avail = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memAvailReal.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    mem_used = str(round(((float(mem_total) - float(mem_avail)) / float(mem_total)) * <span class="number">100</span>, <span class="number">2</span>)) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> mem_used</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemInfo</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_used = getMemUsed(host)</span><br><span class="line">    swap_used = getSwapUsed(host)</span><br><span class="line">    <span class="keyword">return</span> mem_used, swap_used</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getRedis</span>():</span></span><br><span class="line">    pool = redis.ConnectionPool(host=<span class="string">&#x27;160.0.3.5&#x27;</span>,password=<span class="string">&#x27;12345&#x27;</span>, port=<span class="number">6379</span>, decode_responses=<span class="literal">True</span>)   <span class="comment"># host是redis主机，需要redis服务端和客户端都起着 redis默认端口是6379</span></span><br><span class="line">    <span class="keyword">return</span> redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    r=getRedis()</span><br><span class="line">    cupData = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> host <span class="keyword">in</span> hosts:</span><br><span class="line">    </span><br><span class="line">        print(<span class="string">&#x27;=&#x27;</span> * <span class="number">10</span> + host + <span class="string">&#x27;=&#x27;</span> * <span class="number">10</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        print(<span class="string">&quot;系统信息&quot;</span>)</span><br><span class="line">        system = getSystem(host)</span><br><span class="line">        print(system)</span><br><span class="line">        <span class="comment">#r.hset(host, &quot;system&quot;, system)</span></span><br><span class="line"></span><br><span class="line">        print(<span class="string">&quot;系统负载&quot;</span>)</span><br><span class="line">        load1, load10, load15 = getLoads(host)</span><br><span class="line">        print(<span class="string">&#x27;load(5min): %s ,load(10min): %s ,load(15min): %s&#x27;</span> % (load1, load10, load15))</span><br><span class="line">        load = [ &#123; <span class="string">&#x27;load1&#x27;</span> : load1, <span class="string">&#x27;load10&#x27;</span> : load10, <span class="string">&#x27;load15&#x27;</span> : load15 &#125; ]</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&quot;网卡流量&quot;</span>)</span><br><span class="line">        device_dict = &#123;&#125;</span><br><span class="line">        device_list, inside, outside = getNetworkInfo(host)</span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> enumerate(device_list):</span><br><span class="line">            print(<span class="string">&#x27;%s : RX: %-15s   TX: %s &#x27;</span> % (device_list[i], inside[i], outside[i]))</span><br><span class="line">            temp = [ &#123; <span class="string">&#x27;RX&#x27;</span> : inside[i], <span class="string">&#x27;TX&#x27;</span> : outside[i] &#125; ]</span><br><span class="line">            device_dict[device_list[i]] = temp <span class="comment"># 添加</span></span><br><span class="line">        print(device_dict)</span><br><span class="line"> </span><br><span class="line">           </span><br><span class="line">        mem_used, swap_used = getMemInfo(host)</span><br><span class="line">        print(<span class="string">&quot;内存使用率&quot;</span>)</span><br><span class="line">        print(<span class="string">&#x27;Mem_Used = %-15s   Swap_Used = %-15s&#x27;</span> % (mem_used, swap_used))</span><br><span class="line">        Used = [ &#123; <span class="string">&#x27;Mem_Used&#x27;</span> : mem_used, <span class="string">&#x27;Swap_Used&#x27;</span> : swap_used &#125; ]</span><br><span class="line"></span><br><span class="line">        end = time.time()</span><br><span class="line">        print(<span class="string">&#x27;run time:&#x27;</span>, round(end - start, <span class="number">2</span>), <span class="string">&#x27;s&#x27;</span>)</span><br><span class="line">        runT = [ &#123; <span class="string">&#x27;run time&#x27;</span> : round(end - start, <span class="number">2</span>) &#125; ]</span><br><span class="line">        </span><br><span class="line">        data = [ &#123; <span class="string">&#x27;系统信息&#x27;</span> : system, <span class="string">&#x27;系统负载&#x27;</span> : load, <span class="string">&#x27;网卡流量&#x27;</span> : device_dict, <span class="string">&#x27;内存使用率&#x27;</span> : Used, <span class="string">&#x27;run time&#x27;</span> : runT &#125; ]</span><br><span class="line">        cupData[host] = data</span><br><span class="line">        </span><br><span class="line">    r.set(<span class="string">&quot;system information&quot;</span>, str(cupData))</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>hset存储</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">filename:snmp_test.py</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">说明：</span></span><br><span class="line"><span class="string">使用系统的 snmpwalk 来查询设备信息，需要先安装 snmp</span></span><br><span class="line"><span class="string">代码 Windows 和 Linux 通用</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Windows cmd 调用示例：snmpwalk -v 2c -c public 127.0.0.1 1.3.6.1.2.1.1.1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Windows cmd 下查看某主机（192.168.132.130）信息示例：</span></span><br><span class="line"><span class="string">snmpwalk -v 2c -c public 192.168.132.130 1.3.6.1.2.1.1.1</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> redis   <span class="comment"># 导入redis模块，通过python操作redis 也可以直接在redis主机的服务端操作缓存数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;Linux&#x27;</span> == platform.system():</span><br><span class="line">    hosts = [<span class="string">&#x27;160.0.3.1&#x27;</span>,<span class="string">&#x27;160.0.3.5&#x27;</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 在虚拟机运行时则查看本地</span></span><br><span class="line">    hosts = [<span class="string">&#x27;160.0.3.1&#x27;</span>,<span class="string">&#x27;160.0.3.5&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">snmpWalk</span>(<span class="params">host, oid</span>):</span></span><br><span class="line">    result = os.popen(<span class="string">&#x27;snmpwalk -v 2c -c public &#x27;</span> + host + <span class="string">&#x27; &#x27;</span> + oid).read().split(<span class="string">&#x27;\n&#x27;</span>)[:<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取负载信息</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSystem</span>(<span class="params">host</span>):</span></span><br><span class="line">    system = <span class="string">&#x27;:&#x27;</span>.join(snmpWalk(host, <span class="string">&#x27;system&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>:]).strip()</span><br><span class="line">    <span class="keyword">return</span> system</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取负载信息</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getLoad</span>(<span class="params">host, loid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;系统负载&quot;&quot;&quot;</span></span><br><span class="line">    load_oids = <span class="string">&#x27;1.3.6.1.4.1.2021.10.1.3.&#x27;</span> + str(loid)</span><br><span class="line">    <span class="keyword">return</span> snmpWalk(host, load_oids)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getLoads</span>(<span class="params">host</span>):</span></span><br><span class="line">    load1 = getLoad(host, <span class="number">1</span>)</span><br><span class="line">    load10 = getLoad(host, <span class="number">2</span>)</span><br><span class="line">    load15 = getLoad(host, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> load1, load10, load15</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 获取网卡流量</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkDevices</span>(<span class="params">host</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取网络设备信息&quot;&quot;&quot;</span></span><br><span class="line">    device_mib = snmpWalk(host, <span class="string">&#x27;RFC1213-MIB::ifDescr&#x27;</span>)</span><br><span class="line">    device_list = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> device_mib:</span><br><span class="line">        device_list.append(item.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>].strip())</span><br><span class="line">    <span class="keyword">return</span> device_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkData</span>(<span class="params">host, oid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取网络流量&quot;&quot;&quot;</span></span><br><span class="line">    data_mib = snmpWalk(host, oid)</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data_mib:</span><br><span class="line">        byte = float(item.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">3</span>].strip())</span><br><span class="line">        data.append(str(round(byte / <span class="number">1024</span>, <span class="number">2</span>)) + <span class="string">&#x27; KB&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNetworkInfo</span>(<span class="params">host</span>):</span></span><br><span class="line">    device_list = getNetworkDevices(host)</span><br><span class="line">    <span class="comment"># 流入流量</span></span><br><span class="line">    inside = getNetworkData(host, <span class="string">&#x27;IF-MIB::ifInOctets&#x27;</span>)</span><br><span class="line">    <span class="comment"># 流出流量</span></span><br><span class="line">    outside = getNetworkData(host, <span class="string">&#x27;IF-MIB::ifOutOctets&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> device_list, inside, outside</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 内存使用率</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSwapTotal</span>(<span class="params">host</span>):</span></span><br><span class="line">    swap_total = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memTotalSwap.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> swap_total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSwapUsed</span>(<span class="params">host</span>):</span></span><br><span class="line">    swap_avail = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memAvailSwap.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    swap_total = getSwapTotal(host)</span><br><span class="line">    swap_used = str(round(((float(swap_total) - float(swap_avail)) / float(swap_total)) * <span class="number">100</span>, <span class="number">2</span>)) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> swap_used</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemTotal</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_total = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memTotalReal.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> mem_total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemUsed</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_total = getMemTotal(host)</span><br><span class="line">    mem_avail = snmpWalk(host, <span class="string">&#x27;UCD-SNMP-MIB::memAvailReal.0&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27; &#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">    mem_used = str(round(((float(mem_total) - float(mem_avail)) / float(mem_total)) * <span class="number">100</span>, <span class="number">2</span>)) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> mem_used</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMemInfo</span>(<span class="params">host</span>):</span></span><br><span class="line">    mem_used = getMemUsed(host)</span><br><span class="line">    swap_used = getSwapUsed(host)</span><br><span class="line">    <span class="keyword">return</span> mem_used, swap_used</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getRedis</span>():</span></span><br><span class="line">    pool = redis.ConnectionPool(host=<span class="string">&#x27;160.0.3.5&#x27;</span>,password=<span class="string">&#x27;12345&#x27;</span>, port=<span class="number">6379</span>, decode_responses=<span class="literal">True</span>)   <span class="comment"># host是redis主机，需要redis服务端和客户端都起着 redis默认端口是6379</span></span><br><span class="line">    <span class="keyword">return</span> redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    r=getRedis()</span><br><span class="line">    <span class="keyword">for</span> host <span class="keyword">in</span> hosts:</span><br><span class="line">    </span><br><span class="line">        print(<span class="string">&#x27;=&#x27;</span> * <span class="number">10</span> + host + <span class="string">&#x27;=&#x27;</span> * <span class="number">10</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        print(<span class="string">&quot;系统信息&quot;</span>)</span><br><span class="line">        system = getSystem(host)</span><br><span class="line">        print(system)</span><br><span class="line">        r.hset(host, <span class="string">&quot;system&quot;</span>, system)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&quot;系统负载&quot;</span>)</span><br><span class="line">        load1, load10, load15 = getLoads(host)</span><br><span class="line">        print(<span class="string">&#x27;load(5min): %s ,load(10min): %s ,load(15min): %s&#x27;</span> % (load1, load10, load15))</span><br><span class="line">        r.hset(host, <span class="string">&quot;load1&quot;</span>, load1)</span><br><span class="line">        r.hset(host, <span class="string">&quot;load10&quot;</span>, load10)</span><br><span class="line">        r.hset(host, <span class="string">&quot;load15&quot;</span>, load15)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&quot;网卡流量&quot;</span>)</span><br><span class="line">        device_list, inside, outside = getNetworkInfo(host)</span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> enumerate(device_list):</span><br><span class="line">            print(<span class="string">&#x27;%s : RX: %-15s   TX: %s &#x27;</span> % (device_list[i], inside[i], outside[i]))</span><br><span class="line">            r.hset(host, device_list[i]+<span class="string">&quot;_RX&quot;</span>, inside[i])</span><br><span class="line">            r.hset(host, device_list[i]+<span class="string">&quot;_TX&quot;</span>, outside[i])</span><br><span class="line">           </span><br><span class="line">        mem_used, swap_used = getMemInfo(host)</span><br><span class="line">        print(<span class="string">&quot;内存使用率&quot;</span>)</span><br><span class="line">        print(<span class="string">&#x27;Mem_Used = %-15s   Swap_Used = %-15s&#x27;</span> % (mem_used, swap_used))</span><br><span class="line">        r.hset(host, <span class="string">&quot;mem_used&quot;</span>, mem_used)</span><br><span class="line">        r.hset(host, <span class="string">&quot;swap_used&quot;</span>, swap_used)</span><br><span class="line"></span><br><span class="line">        end = time.time()</span><br><span class="line">        print(<span class="string">&#x27;run time:&#x27;</span>, round(end - start, <span class="number">2</span>), <span class="string">&#x27;s&#x27;</span>)</span><br><span class="line">        r.hset(host, <span class="string">&quot;run time&quot;</span>, round(end - start, <span class="number">2</span>))</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h3><p>放到crontab里面去，每30分钟执行一次并保存到redis中（更新代码）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h1 id="proc下主机信息"><a href="#proc下主机信息" class="headerlink" title="/proc下主机信息"></a>/proc下主机信息</h1><p><strong>结果</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 主机名键:[主机名，ip地址，CPU使用率，内存使用率，SWAP使用率]</span><br><span class="line">[root@localhost cpu_test]# python3 cpu.py </span><br><span class="line">&#123;&#39;主机名1&#39;: [&#39;主机名1&#39;, &#39;192.168.220.11&#39;, &#39;0.98%&#39;, &#39;20%&#39;, &#39;0%&#39;], &#39;主机名2&#39;: [&#39;主机名2&#39;, &#39;192.168.220.10&#39;, &#39;1.31%&#39;, &#39;52%&#39;, &#39;14%&#39;]&#125;</span><br><span class="line">[root@localhost cpu_test]# </span><br></pre></td></tr></table></figure><p><strong>1.在linux上部署python，见《 Linux环境下的软件安装》</strong></p><p>因为要测试代码，在windows上也安装了一个，下载，配置环境变量，再执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install paramiko</span><br></pre></td></tr></table></figure><p><strong>2.准备好实现代码 cpu.py</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf8 -*-</span></span><br><span class="line"><span class="comment"># 主机名键:[主机名，ip地址，CPU使用率，内存使用率，SWAP使用率]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"> </span><br><span class="line">linux_info=(</span><br><span class="line">            [<span class="string">&#x27;主机名1&#x27;</span>,<span class="string">&#x27;192.168.220.11&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;主机名2&#x27;</span>,<span class="string">&#x27;192.168.220.10&#x27;</span>]</span><br><span class="line">            )</span><br><span class="line"> </span><br><span class="line">server_user=<span class="string">&#x27;root&#x27;</span></span><br><span class="line">server_pw=<span class="string">&#x27;root&#x27;</span></span><br><span class="line">server_info=&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cpu_r</span>(<span class="params">cpu_stat</span>):</span></span><br><span class="line">    <span class="comment"># 返回CPU当前的总时间片和空闲时间片信息的数据</span></span><br><span class="line">    sys_cpu_info_t = re.findall(<span class="string">b&#x27;cpu .*\d&#x27;</span>,cpu_stat)</span><br><span class="line">    pattern = re.compile(<span class="string">r&#x27;\d+&#x27;</span>)   <span class="comment"># 查找数字</span></span><br><span class="line">    cpu_z_str = str(sys_cpu_info_t)</span><br><span class="line">    cpu_z_str=pattern.findall(cpu_z_str)</span><br><span class="line">    <span class="comment">#print(cpu_z_str)</span></span><br><span class="line">    cpu_z_list = list(cpu_z_str)</span><br><span class="line">    <span class="comment">#print(cpu_z_list)</span></span><br><span class="line">    <span class="comment">#cpu_z_list.remove(&quot;cpu&quot;)</span></span><br><span class="line"> </span><br><span class="line">    f_line_a=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> cpu_z_list:</span><br><span class="line">        i=int(i)</span><br><span class="line">        f_line_a.append(i)</span><br><span class="line">    total = sum(f_line_a)</span><br><span class="line">    idle = f_line_a[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> total,idle</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">meminfo_disc</span>(<span class="params">meminfo_r</span>):</span></span><br><span class="line">    <span class="comment"># 返回内存使用信息的一个字典，取值需要 /proc/meminfo 的内容</span></span><br><span class="line">    <span class="comment">#print(meminfo_r)</span></span><br><span class="line">    aa = re.sub(<span class="string">r&#x27; kB&#x27;</span>,<span class="string">&#x27;&#x27;</span>,str(meminfo_r))</span><br><span class="line">    aa = re.sub(<span class="string">r&#x27;b\&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,aa)</span><br><span class="line">    <span class="comment">#print(&#x27;*******************************************************************************&#x27;)</span></span><br><span class="line">    <span class="comment">#print(aa)</span></span><br><span class="line">    bb = re.sub(<span class="string">r&#x27; &#x27;</span>,<span class="string">&#x27;&#x27;</span>,aa)</span><br><span class="line">    <span class="comment">#print(&#x27;***********************************************************************************&#x27;)</span></span><br><span class="line">    <span class="comment">#print(bb)</span></span><br><span class="line">    cc = re.sub(<span class="string">r&#x27;\\n&#x27;</span>,<span class="string">&#x27;:&#x27;</span>,bb)</span><br><span class="line">    <span class="comment">#print(&#x27;***********************************************************************************&#x27;)</span></span><br><span class="line">    <span class="comment">#print(cc)</span></span><br><span class="line">    dd = cc.split(<span class="string">&quot;:&quot;</span>)</span><br><span class="line">    <span class="comment">#print(&#x27;************************************************************************************&#x27;)</span></span><br><span class="line">    <span class="comment">#print(dd)</span></span><br><span class="line">    meminfo_d = &#123;&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> len(dd)&gt;<span class="number">1</span>:</span><br><span class="line">        <span class="comment">#print(dd[0])</span></span><br><span class="line">        meminfo_d[dd[<span class="number">0</span>]]=dd[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> dd[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">return</span> meminfo_d</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> linux_info:</span><br><span class="line">    server_id=i[<span class="number">0</span>]</span><br><span class="line">    server_ip=i[<span class="number">1</span>]</span><br><span class="line">    ss = paramiko.SSHClient()</span><br><span class="line">    ss.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"> </span><br><span class="line">    ss.connect(server_ip,<span class="number">22</span>,server_user,server_pw)</span><br><span class="line">    stdin,stdout,stderr=ss.exec_command(<span class="string">&#x27;cat /proc/stat&#x27;</span>)</span><br><span class="line">    sys_cpu_stat = stdout.read()</span><br><span class="line"> </span><br><span class="line">    stdin,stdout,stderr=ss.exec_command(<span class="string">&#x27;cat /proc/meminfo&#x27;</span>)</span><br><span class="line">    meminfo_r = stdout.read()</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#print(sys_cpu_stat)</span></span><br><span class="line">    total_a,idle_a=cpu_r(sys_cpu_stat)</span><br><span class="line">    sleep(<span class="number">3</span>)</span><br><span class="line">    stdin,stdout,stderr=ss.exec_command(<span class="string">&#x27;cat /proc/stat&#x27;</span>)</span><br><span class="line">    sys_cpu_stat = stdout.read()</span><br><span class="line">    total_b,idle_b=cpu_r(sys_cpu_stat)</span><br><span class="line">    ss.close()</span><br><span class="line"> </span><br><span class="line">    sys_idle = idle_b - idle_a</span><br><span class="line">    sys_total = total_b - total_a</span><br><span class="line">    sys_us = sys_total - sys_idle</span><br><span class="line">    cpu_a = (float(sys_us)/sys_total)*<span class="number">100</span></span><br><span class="line">    cpu_b = str(round(cpu_a,<span class="number">2</span>))+<span class="string">&#x27;%&#x27;</span></span><br><span class="line"> </span><br><span class="line">    meminfo_key = meminfo_disc(meminfo_r)</span><br><span class="line"> </span><br><span class="line">    mem_kx = int(meminfo_key.get(<span class="string">&#x27;MemTotal&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;MemFree&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;Buffers&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;Cached&#x27;</span>))</span><br><span class="line">    mem_kx_l = (float(mem_kx)/int(meminfo_key.get(<span class="string">&#x27;MemTotal&#x27;</span>)))*<span class="number">100</span></span><br><span class="line">    mem_kx_lv = str(round(mem_kx_l))+<span class="string">&#x27;%&#x27;</span></span><br><span class="line"> </span><br><span class="line">    swap_user = float(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;SwapFree&#x27;</span>))/float(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))</span><br><span class="line">    swap_user_l = (float(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;SwapFree&#x27;</span>)))/int(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))*<span class="number">100</span></span><br><span class="line">    swap_user_lv = str(round(swap_user_l))+<span class="string">&#x27;%&#x27;</span></span><br><span class="line"> </span><br><span class="line">    server_info_list=[server_id,server_ip,cpu_b,mem_kx_lv,swap_user_lv]</span><br><span class="line">    server_info[server_id]=server_info_list</span><br><span class="line">    <span class="comment"># 输出一个字典</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">print</span> (server_info)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>3.在linux上运行py文件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 cpu.py</span><br></pre></td></tr></table></figure><p>会报错，缺少第三方库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python - ImportError: No module named paramiko</span><br></pre></td></tr></table></figure><p>​    <strong>1.安装pycrypto模块</strong> </p><p>下载该模块地址：<a href="https://www.dlitz.net/software/pycrypto/">https://www.dlitz.net/software/pycrypto/</a> 上传主机然后解压安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf pycrypto-2.6.1.tar.gz</span><br><span class="line">cd pycrypto-2.6.1</span><br><span class="line">python3 setup.py build &amp;&amp; python3 setup.py install</span><br></pre></td></tr></table></figure><p>​    <strong>2.安装paramiko</strong> </p><p>下载地址：<a href="https://pypi.org/project/paramiko/#description">https://pypi.org/project/paramiko/#description</a> 可以找到适合自己的版本下载，然后上传主机解压安装 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf paramiko-2.7.2.tar.gz</span><br><span class="line">cd paramiko-2.7.2</span><br><span class="line">python3 setup.py build &amp;&amp; python3 setup.py install</span><br></pre></td></tr></table></figure><p>然后报错ImportError: No module named setuptools，显示没有setuptools这个模块，安装一下这个模块。</p><pre><code> **3.安装setuptools**</code></pre><p>地址：<a href="https://pypi.org/project/setuptools/">https://pypi.org/project/setuptools/</a> 找到自己合适的版本，然后点击下载： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip setuptools-50.3.0.zip</span><br></pre></td></tr></table></figure><p>这一步可能会报错找不到unzip命令：下载一下（如果没有跳过）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y unzip zip</span><br></pre></td></tr></table></figure><p>继续执行命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd setuptools-50.3.0</span><br><span class="line">python3 setup.py build &amp;&amp; python3 setup.py install</span><br></pre></td></tr></table></figure><p>然后重新进入paramiko-2.7.2 目录安装 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 setup.py build &amp;&amp; python3 setup.py install</span><br></pre></td></tr></table></figure><p>我到这一步就安装成功了，如果还报错的话可以参考下边的参考原文，他后边还安装了一些依赖</p><p>参考原文：<a href="https://blog.csdn.net/zyingpei/article/details/89525410">https://blog.csdn.net/zyingpei/article/details/89525410</a></p><p>网上原始参考代码：<a href="https://www.oschina.net/code/snippet_924001_47763">https://www.oschina.net/code/snippet_924001_47763</a></p><p>会有很多报错，应该是python版本问题，需要修改代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf8 -*-</span></span><br><span class="line"><span class="comment"># Email:chenwx716@163.com</span></span><br><span class="line">__author__ = <span class="string">&#x27;chenwx&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"> </span><br><span class="line">linux_info=(</span><br><span class="line">            [<span class="string">&#x27;192.168.220.11&#x27;</span>,<span class="string">&#x27;192.168.220.11&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;192.168.220.10&#x27;</span>,<span class="string">&#x27;192.168.220.10&#x27;</span>]</span><br><span class="line">            )</span><br><span class="line"> </span><br><span class="line">server_user=<span class="string">&#x27;root&#x27;</span></span><br><span class="line">server_pw=<span class="string">&#x27;root&#x27;</span></span><br><span class="line">server_info=&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cpu_r</span>(<span class="params">cpu_stat</span>):</span></span><br><span class="line">    <span class="comment"># 返回CPU当前的总时间片和空闲时间片信息的数据</span></span><br><span class="line">    sys_cpu_info_t = re.findall(<span class="string">b&#x27;cpu .*\d&#x27;</span>,cpu_stat)</span><br><span class="line">    cpu_z_str = str(sys_cpu_info_t)</span><br><span class="line">    print(cpu_z_str)</span><br><span class="line">    num = re.sub(<span class="string">r&#x27;\D&#x27;</span>, <span class="string">&quot;&quot;</span>, cpu_z_str)</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">&quot;电话号码是 : &quot;</span>, num)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#cpu_z_str = &#x27; &#x27;.join(str(sys_cpu_info_t))</span></span><br><span class="line">    <span class="comment">#print(sys_cpu_info_t)</span></span><br><span class="line">    <span class="comment">#print(cpu_z_str)</span></span><br><span class="line">    <span class="comment">#print(cpu_z_str.split( ))</span></span><br><span class="line">    <span class="comment">#cpu_z_list = list(cpu_z_str.split())</span></span><br><span class="line">    cpu_z_list = list(cpu_z_str)</span><br><span class="line">    <span class="comment">#print(cpu_z_list)</span></span><br><span class="line">    cpu_z_list.remove(<span class="string">&quot;cpu&quot;</span>)</span><br><span class="line"> </span><br><span class="line">    f_line_a=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> cpu_z_list:</span><br><span class="line">        i=int(i)</span><br><span class="line">        f_line_a.append(i)</span><br><span class="line">    total = sum(f_line_a)</span><br><span class="line">    idle = f_line_a[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> total,idle</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">meminfo_disc</span>(<span class="params">meminfo_r</span>):</span></span><br><span class="line">    <span class="comment"># 返回内存使用信息的一个字典，取值需要 /proc/meminfo 的内容</span></span><br><span class="line">    aa = re.sub(<span class="string">r&#x27; kB&#x27;</span>,<span class="string">&#x27;&#x27;</span>,meminfo_r)</span><br><span class="line">    bb = re.sub(<span class="string">r&#x27; +&#x27;</span>,<span class="string">&#x27;&#x27;</span>,aa)</span><br><span class="line">    cc = re.sub(<span class="string">r&#x27;\n&#x27;</span>,<span class="string">&#x27;:&#x27;</span>,bb)</span><br><span class="line">    dd = cc.split(<span class="string">&quot;:&quot;</span>)</span><br><span class="line">    meminfo_d = &#123;&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> len(dd)&gt;<span class="number">1</span>:</span><br><span class="line">        meminfo_d[dd[<span class="number">0</span>]]=dd[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> dd[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">return</span> meminfo_d</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> linux_info:</span><br><span class="line">    server_id=i[<span class="number">0</span>]</span><br><span class="line">    server_ip=i[<span class="number">1</span>]</span><br><span class="line">    ss = paramiko.SSHClient()</span><br><span class="line">    ss.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"> </span><br><span class="line">    ss.connect(server_ip,<span class="number">22</span>,server_user,server_pw)</span><br><span class="line">    stdin,stdout,stderr=ss.exec_command(<span class="string">&#x27;cat /proc/stat&#x27;</span>)</span><br><span class="line">    sys_cpu_stat = stdout.read()</span><br><span class="line"> </span><br><span class="line">    stdin,stdout,stderr=ss.exec_command(<span class="string">&#x27;cat /proc/meminfo&#x27;</span>)</span><br><span class="line">    meminfo_r = stdout.read()</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#print(sys_cpu_stat)</span></span><br><span class="line">    total_a,idle_a=cpu_r(sys_cpu_stat)</span><br><span class="line">    sleep(<span class="number">3</span>)</span><br><span class="line">    stdin,stdout,stderr=ss.exec_command(<span class="string">&#x27;cat /proc/stat&#x27;</span>)</span><br><span class="line">    sys_cpu_stat = stdout.read()</span><br><span class="line">    total_b,idle_b=cpu_r(sys_cpu_stat)</span><br><span class="line">    ss.close()</span><br><span class="line"> </span><br><span class="line">    sys_idle = idle_b - idle_a</span><br><span class="line">    sys_total = total_b - total_a</span><br><span class="line">    sys_us = sys_total - sys_idle</span><br><span class="line">    cpu_a = (float(sys_us)/sys_total)*<span class="number">100</span></span><br><span class="line">    cpu_b = str(round(cpu_a,<span class="number">2</span>))+<span class="string">&#x27;%&#x27;</span></span><br><span class="line"> </span><br><span class="line">    meminfo_key = meminfo_disc(meminfo_r)</span><br><span class="line"> </span><br><span class="line">    mem_kx = int(meminfo_key.get(<span class="string">&#x27;MemTotal&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;MemFree&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;Buffers&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;Cached&#x27;</span>))</span><br><span class="line">    mem_kx_l = (float(mem_kx)/int(meminfo_key.get(<span class="string">&#x27;MemTotal&#x27;</span>)))*<span class="number">100</span></span><br><span class="line">    mem_kx_lv = str(round(mem_kx_l))+<span class="string">&#x27;%&#x27;</span></span><br><span class="line"> </span><br><span class="line">    swap_user = float(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;SwapFree&#x27;</span>))/float(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))</span><br><span class="line">    swap_user_l = (float(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))-int(meminfo_key.get(<span class="string">&#x27;SwapFree&#x27;</span>)))/int(meminfo_key.get(<span class="string">&#x27;SwapTotal&#x27;</span>))*<span class="number">100</span></span><br><span class="line">    swap_user_lv = str(round(swap_user_l))+<span class="string">&#x27;%&#x27;</span></span><br><span class="line"> </span><br><span class="line">    server_info_list=[server_id,server_ip,cpu_b,mem_kx_lv,swap_user_lv]</span><br><span class="line">    server_info[server_id]=server_info_list</span><br><span class="line">    <span class="comment"># 输出一个字典</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">print</span> (server_info)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;snmp协议（调用python）&quot;&gt;&lt;a href=&quot;#snmp协议（调用python）&quot; class=&quot;headerlink&quot; title=&quot;snmp协议（调用python）&quot;&gt;&lt;/a&gt;snmp协议（调用python）&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;结果：&lt;/s</summary>
      
    
    
    
    <category term="工作方案" scheme="https://xiaopantongxue816.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%96%B9%E6%A1%88/"/>
    
    
  </entry>
  
  <entry>
    <title>python</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/09/python/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/09/python/</id>
    <published>2020-09-09T02:27:53.000Z</published>
    <updated>2020-09-09T02:31:07.676Z</updated>
    
    
    
    
    <category term="后端" scheme="https://xiaopantongxue816.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xiaopantongxue816.github.io/2020/09/04/%E9%83%A8%E7%BD%B2/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/04/%E9%83%A8%E7%BD%B2/</id>
    <published>2020-09-04T08:59:53.333Z</published>
    <updated>2020-09-07T02:40:51.516Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>部署异常</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/04/%E9%83%A8%E7%BD%B2%E5%BC%82%E5%B8%B8/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/04/%E9%83%A8%E7%BD%B2%E5%BC%82%E5%B8%B8/</id>
    <published>2020-09-04T08:29:28.000Z</published>
    <updated>2020-09-07T08:56:12.314Z</updated>
    
    <content type="html"><![CDATA[<h1 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h1><p>启动服务的时候 <strong>java.net.BindException</strong>: 地址已在使用，是因为端口被占用 端口显示 8005</p><pre><code class="ssh">04-Sep-2020 15:51:24.575 严重 [main] org.apache.catalina.core.StandardServer.await StandardServer.await: create[localhost:8005]:         java.net.BindException: 地址已在使用 (Bind failed)</code></pre><pre><code>netstat -alnp | grep 8005[root@localhost bin]# netstat -alnp | grep 8005tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      2147/java     kill -9 2547</code></pre><p>重新启动服务器 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;端口&quot;&gt;&lt;a href=&quot;#端口&quot; class=&quot;headerlink&quot; title=&quot;端口&quot;&gt;&lt;/a&gt;端口&lt;/h1&gt;&lt;p&gt;启动服务的时候 &lt;strong&gt;java.net.BindException&lt;/strong&gt;: 地址已在使用，是因为端口被占用 端口显示 </summary>
      
    
    
    
    <category term="运维" scheme="https://xiaopantongxue816.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="异常" scheme="https://xiaopantongxue816.github.io/tags/%E5%BC%82%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>nuoyi</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/04/nuoyi/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/04/nuoyi/</id>
    <published>2020-09-04T08:01:40.000Z</published>
    <updated>2020-09-09T04:11:44.575Z</updated>
    
    <content type="html"><![CDATA[<p>地址：<a href="http://ruoyi.vip/">http://ruoyi.vip/</a></p><h1 id="部署遇到的一些问题"><a href="#部署遇到的一些问题" class="headerlink" title="部署遇到的一些问题"></a>部署遇到的一些问题</h1><p>在本机上用idea运行没啥问题改一下数据库数据就OK了没啥问题</p><p>在Linux上部署</p><p>需要删除ruoyi_admin.pom下的一个插件（不然会二次打包jar包就不知道是啥东西了）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">               &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.1.1.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;fork&gt;true&lt;&#x2F;fork&gt; &lt;!&amp;ndash; 如果没有该配置，devtools不会生效 &amp;ndash;&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;repackage&lt;&#x2F;goal&gt;</span><br><span class="line">                        &lt;&#x2F;goals&gt;</span><br><span class="line">                    &lt;&#x2F;execution&gt;</span><br><span class="line">                &lt;&#x2F;executions&gt;</span><br><span class="line"> &lt;&#x2F;plugin&gt;</span><br></pre></td></tr></table></figure><p>然后把项目父模块clean-》install-》找到（ruoyi_admin模块下的target里的）war包-》放到Linux上tomcat的webapps下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 开启tomcat日志</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;apache-tomcat-8.5.57&#x2F;bin</span><br><span class="line">.&#x2F;catalina.sh run</span><br></pre></td></tr></table></figure><p>访问地址：LinuxIP:8080/war包名</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;地址：&lt;a href=&quot;http://ruoyi.vip/&quot;&gt;http://ruoyi.vip/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;部署遇到的一些问题&quot;&gt;&lt;a href=&quot;#部署遇到的一些问题&quot; class=&quot;headerlink&quot; title=&quot;部署遇到的一些问题&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="开源项目" scheme="https://xiaopantongxue816.github.io/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="nuoyi" scheme="https://xiaopantongxue816.github.io/tags/nuoyi/"/>
    
  </entry>
  
  <entry>
    <title>字符串数组</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/03/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E7%BB%84/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/03/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E7%BB%84/</id>
    <published>2020-09-03T10:42:27.000Z</published>
    <updated>2020-09-07T08:33:27.760Z</updated>
    
    <content type="html"><![CDATA[<h1 id="字符串转字节数组"><a href="#字符串转字节数组" class="headerlink" title="字符串转字节数组"></a>字符串转字节数组</h1><pre><code class="java"># String[] s=&amp;#123;&quot;&amp;#123;5&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&amp;#125;&quot;&amp;#125;;-&gt;Arrays.toString(bytess)-&gt;[5, 7, 8, 9]# String[] s=&amp;#123;&quot;&amp;#123;5&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&amp;#125;&quot;&amp;#125;;-&gt;bytess.toString()-&gt;[B@23fc625epublic static byte[] stringToBytes(String receive_msg)&amp;#123;        String[] s=receive_msg.split(&quot;,&quot;);        byte[] bytes=new byte[s.length];        for (int i=0;i&lt;=s.length-1;i++)&amp;#123;            if (i==0)&amp;#123;                bytes[i]=Byte.valueOf(s[i].substring(1));            &amp;#125;else if (i==s.length-1)&amp;#123;                bytes[i]=Byte.valueOf(s[i].substring(0,s[i].length()-1));            &amp;#125;else &amp;#123;                bytes[i]=Byte.valueOf(s[i]);            &amp;#125;    &amp;#125;    return bytes;    &amp;#125;</code></pre><h1 id="对象转字节数组"><a href="#对象转字节数组" class="headerlink" title="对象转字节数组"></a>对象转字节数组</h1><pre><code class="java"># protobuf序列化特有的方法 byte[] byteArray = Object.toByteArray();</code></pre><h1 id="字节数组转字符串"><a href="#字节数组转字符串" class="headerlink" title="字节数组转字符串"></a>字节数组转字符串</h1><pre><code class="java"># Byte[] bytes=&amp;#123;1,2,3,4&amp;#125;;--》String s=&quot;[1, 2, 3, 4]&quot;Arrays.toString(byteArray)</code></pre><h1 id="数组转字符串"><a href="#数组转字符串" class="headerlink" title="数组转字符串"></a>数组转字符串</h1><pre><code class="java">String s2 = bytes.toString();            # Byte[] bytes=&amp;#123;1,2,3,4&amp;#125;;-&gt;[Ljava.lang.Byte;@5451c3a8String s3 = ArrayUtil.arrayToString(s);  # String[] s=&amp;#123;&quot;&amp;#123;5&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&amp;#125;&quot;&amp;#125;;-&gt;&amp;#123;5 7 8 9&amp;#125;String s4 = ArrayUtils.toString(bytes);  # Byte[] bytes=&amp;#123;1,2,3,4&amp;#125;;-&gt;&amp;#123;1,2,3,4&amp;#125; </code></pre><h1 id="C-语法"><a href="#C-语法" class="headerlink" title="C#语法"></a>C#语法</h1><h3 id="从第几个开始，截取长度为-几-的字符串"><a href="#从第几个开始，截取长度为-几-的字符串" class="headerlink" title="从第几个开始，截取长度为 几 的字符串"></a>从第几个开始，截取长度为 几 的字符串</h3><pre><code class="c#">&amp;#123;    string str2 = binreadx.ReadString();    str2=str2.Substring(0,8);    byte[] array = System.Text.Encoding.ASCII.GetBytes(str2); //数组array为对应的ASCII数组    string ASCIIstr2 = null;    for (int n = 0; n &lt; array.Length; n++)    &amp;#123;        int asciicode = (int)(array[n]);        ASCIIstr2 += Convert.ToString(asciicode);//字符串ASCIIstr2 为对应的ASCII字符串    &amp;#125;    //dgvTelegram.Rows[i].Cells[&quot;SNAPSHOOT&quot;].Value = binreadx.ReadString();    dgvTelegram.Rows[i].Cells[&quot;SNAPSHOOT&quot;].Value = ASCIIstr2;&amp;#125;</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;字符串转字节数组&quot;&gt;&lt;a href=&quot;#字符串转字节数组&quot; class=&quot;headerlink&quot; title=&quot;字符串转字节数组&quot;&gt;&lt;/a&gt;字符串转字节数组&lt;/h1&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;# String[] s=&amp;amp;#123;&amp;q</summary>
      
    
    
    
    <category term="后端" scheme="https://xiaopantongxue816.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>kafka</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/03/kafka/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/03/kafka/</id>
    <published>2020-09-03T09:57:44.000Z</published>
    <updated>2020-09-08T00:23:30.103Z</updated>
    
    <content type="html"><![CDATA[<h1 id="学习笔记"><a href="#学习笔记" class="headerlink" title="学习笔记"></a>学习笔记</h1><p>看官方文档看到了负载这个词，特别熟悉但又觉得特别陌生，所以就查了一下负载的释译：</p><p>机械设备以及生理组织等在单位时间内所担负的工作量。也指机件及建筑构件承受的重量。 </p><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a><strong>基本概念</strong></h3><ol><li><p>Broker：Kafka集群包含一个或多个服务器，这种服务器被称为broker。</p></li><li><p>Topic：每条发布到Kafka集群的消息都有一个主题名称，这个主题名称就被称为Topic。</p></li><li><p>Partition：物理上的概念，每个Topic包含一个或多个Partition。</p></li><li><p>Producer：消息生产者，负责发布消息到Kafka Broker。</p></li><li><p>Consumer：消息消费者，向Kafka broker读取消息的客户端</p></li><li><p>Consumer Group：每个Consumer属于一个特定的Consumer Group，group name可单独设定，若不设定则属于默认的group。</p></li></ol><h3 id="为什么选择kafka-kafka的优点"><a href="#为什么选择kafka-kafka的优点" class="headerlink" title="为什么选择kafka(kafka的优点)"></a>为什么选择kafka(kafka的优点)</h3><h5 id="多个生产者"><a href="#多个生产者" class="headerlink" title="多个生产者"></a>多个生产者</h5><p>从多个前端系统（不同生产者）接收数据，并以统一的格式对外提供数据。</p><h5 id="多个消费者"><a href="#多个消费者" class="headerlink" title="多个消费者"></a>多个消费者</h5><p>支持多个消费者从一个单独的消息流上读取数据，而且消费者之间互不影响。</p><p>这与其他队列系统不同，其他队列系统的消息一旦被一个客户端读取，其他客户端就无法再读取它。</p><p>另外，多个消费者可以组成一个群组，它们共享一个消息流，并保证整个群组对每个给定的消息只处理一次。</p><h5 id="基于磁盘的数据存储"><a href="#基于磁盘的数据存储" class="headerlink" title="基于磁盘的数据存储"></a>基于磁盘的数据存储</h5><p>允许消费者非实时地读取消息（数据保留特性）消息被提交到磁盘，根据设置的保留规则进行保存。每个主题可以设置单独的保留规则，以便满足不同消费者的需求，各个主题可以保留不同数量的消息。</p><p>消费者可能会因为处理速度慢或突发的流量高峰导致无法及时读取消息，而持久化数据可以保证数据不会丢失。消费者可以被关闭，但消息会继续保留在kafka里。消费者可以从上次中断的地方继续处理消息。</p><h5 id="伸缩性"><a href="#伸缩性" class="headerlink" title="伸缩性"></a><strong>伸缩性</strong></h5><p>用户在开发阶段可以先使用单个broker，再扩展到包含三个broker的小型开发集群，然后随着数据量不断增长，部署到生产环境的集群可能包含上百个broker。对在线集群进行扩展，丝毫不影响整体系统的可用性。</p><h5 id="高性能"><a href="#高性能" class="headerlink" title="高性能"></a><strong>高性能</strong></h5><p>通过横向扩展生产者、消费者和broker，kafka可以轻松处理巨大的消息流。在处理大量数据的同时，它还能保证亚秒级的消息延迟。</p><p> 原文：<a href="https://my.oschina.net/u/4288942/blog/4061346">https://my.oschina.net/u/4288942/blog/4061346</a></p><h1 id="protobuf的字节数组的数据传输（基于Kafka-和-Zookeeper）"><a href="#protobuf的字节数组的数据传输（基于Kafka-和-Zookeeper）" class="headerlink" title="protobuf的字节数组的数据传输（基于Kafka 和 Zookeeper）"></a>protobuf的字节数组的数据传输（基于<a href="http://kafka.apache.org/">Kafka</a> 和 <a href="http://zookeeper.apache.org/">Zookeeper</a>）</h1><h3 id="4-生产者工具"><a href="#4-生产者工具" class="headerlink" title="4.生产者工具"></a>4.生产者工具</h3><p><strong>ProtobufKafkaProducerUtil.java</strong></p><pre><code class="java">package com.pjy.kafka;import java.util.ArrayList;import java.util.Arrays;import java.util.List;import java.util.Properties;import com.pjy.serial.PersonTestProtos;import kafka.javaapi.producer.Producer;import kafka.producer.KeyedMessage;import kafka.producer.ProducerConfig;import org.apache.commons.lang.ArrayUtils;public class ProtobufKafkaProducerUtil &amp;#123;    private static Producer&lt;String, String&gt; producer;    public final static String TOPIC = &quot;test_protobuf_pjy&quot;;    /*构建proto对象*/    public static &lt;T&gt; T buuldProtoObject()&amp;#123;        //获取一个PBPlayer构造器        PersonTestProtos.PersonTest.Builder personBuilder =  PersonTestProtos.PersonTest.newBuilder();        //设置数据        personBuilder.setName(&quot;pjy&quot;).setEmail(&quot;11111@2222&quot;).setSex(PersonTestProtos.PersonTest.Sex.MALE);        // 内部的 PhoneNumber 构造器        PersonTestProtos.PersonTest.PhoneNumber.Builder phoneNumberBuilder = PersonTestProtos.PersonTest.PhoneNumber.newBuilder();        // PhoneNumber 赋值        phoneNumberBuilder.setType(PersonTestProtos.PersonTest.PhoneNumber.PhoneType.MOBILE);        phoneNumberBuilder.setNumber(&quot;112233445566&quot;);        // personTest 设置 PhoneNumber        personBuilder.addPhone(phoneNumberBuilder);        PersonTestProtos.PersonTest personTest = personBuilder.build();        return (T)personTest;    &amp;#125;    /**     * 序列化     */    public static byte[] toSerialize()  &amp;#123;        /*//获取一个PBPlayer构造器        PersonTestProtos.PersonTest.Builder personBuilder =  PersonTestProtos.PersonTest.newBuilder();        //设置数据        personBuilder.setName(&quot;pjy&quot;).setEmail(&quot;11111@2222&quot;).setSex(PersonTestProtos.PersonTest.Sex.MALE);        // 内部的 PhoneNumber 构造器        PersonTestProtos.PersonTest.PhoneNumber.Builder phoneNumberBuilder = PersonTestProtos.PersonTest.PhoneNumber.newBuilder();        // PhoneNumber 赋值        phoneNumberBuilder.setType(PersonTestProtos.PersonTest.PhoneNumber.PhoneType.MOBILE);        phoneNumberBuilder.setNumber(&quot;112233445566&quot;);        // personTest 设置 PhoneNumber        personBuilder.addPhone(phoneNumberBuilder);        // 生成 personTest 对象        PersonTestProtos.PersonTest personTest = personBuilder.build();*/          //序列化成字节数组        PersonTestProtos.PersonTest personTest = buuldProtoObject();        byte[] byteArray = personTest.toByteArray();        //System.out.println(&quot;序列化后的字节数组:&quot;+Arrays.toString(byteArray));        return byteArray;    &amp;#125;    public static void start(String broker_list, String producer_type)&amp;#123;        Properties props = new Properties();        props.put(&quot;metadata.broker.list&quot;, broker_list);        props.put(&quot;producer.type&quot;, producer_type==null?&quot;sync&quot;:producer_type);        props.put(&quot;serializer.class&quot;, &quot;kafka.serializer.StringEncoder&quot;);        props.put(&quot;key.serializer.class&quot;, &quot;kafka.serializer.StringEncoder&quot;);        //request.required.acks        //0, which means that the producer never waits for an acknowledgment from the broker (the same behavior as 0.7). This option provides the lowest latency but the weakest durability guarantees (some data will be lost when a server fails).        //1, which means that the producer gets an acknowledgment after the leader replica has received the data. This option provides better durability as the client waits until the server acknowledges the request as successful (only messages that were written to the now-dead leader but not yet replicated will be lost).        //-1, which means that the producer gets an acknowledgment after all in-sync replicas have received the data. This option provides the best durability, we guarantee that no messages will be lost as long as at least one in sync replica remains.        props.put(&quot;request.required.acks&quot;,&quot;-1&quot;);        ProducerConfig producerConfig = new ProducerConfig(props);        producer = new Producer&lt;String, String&gt;(producerConfig);    &amp;#125;    public static void send(String message) &amp;#123;        if(message == null)&amp;#123;            return;        &amp;#125;        try &amp;#123;            KeyedMessage&lt;String, String&gt; km = new KeyedMessage&lt;String, String&gt;(TOPIC, message);            producer.send(km);        &amp;#125; catch (Exception e) &amp;#123;            e.printStackTrace();            throw e;        &amp;#125;    &amp;#125;    public static void send(String topicName, String message) &amp;#123;        if(topicName == null || message == null)&amp;#123;            return;        &amp;#125;        try &amp;#123;            KeyedMessage&lt;String, String&gt; km = new KeyedMessage&lt;String, String&gt;(topicName, message);            producer.send(km);        &amp;#125; catch (Exception e) &amp;#123;            e.printStackTrace();            throw e;        &amp;#125;    &amp;#125;    public static void send(String topicName, List&lt;String&gt; messages) &amp;#123;        if(topicName == null || messages == null)&amp;#123;            return;        &amp;#125;        try &amp;#123;            List&lt;KeyedMessage&lt;String, String&gt;&gt; kms = new ArrayList&lt;KeyedMessage&lt;String, String&gt;&gt;();            for (String msg : messages) &amp;#123;               // kms.add(new KeyedMessage&lt;String, String&gt;(topicName, String.valueOf(RandomUtils.nextInt()), msg));                //System.out.println(msg);                kms.add(new KeyedMessage&lt;String, String&gt;(topicName,null,msg));        &amp;#125;            producer.send(kms);        &amp;#125; catch (Exception e) &amp;#123;            e.printStackTrace();            throw e;        &amp;#125;    &amp;#125;    public static void stop() &amp;#123;        if (producer != null) &amp;#123;            producer.close();            producer = null;        &amp;#125;    &amp;#125;    public static void main( String[] args) &amp;#123;        Long messageNo = 0L;        final Long COUNT = 100L;        //start(&quot;168.2.4.57:9092,168.2.4.58:9092,168.2.4.59:9092,168.2.4.60:9092&quot;, &quot;sync&quot;);        start(&quot;10.0.0.16:9092&quot;, &quot;sync&quot;);        int split = 0;        List&lt;String&gt; messages = new ArrayList&lt;String&gt;();        while (messageNo &lt; COUNT) &amp;#123;            String key = String.valueOf(messageNo);            //String data = &quot;***********hello kafka message &quot; + key;           String data = ArrayUtils.toString(toSerialize(), &quot;,&quot;); // 数组转字符串(逗号分隔,首尾加大括号)            if (split &lt; 10) &amp;#123;                messages.add(data);                split++;            &amp;#125; else &amp;#123;                send(TOPIC, messages);                split = 0;                messages.clear();            &amp;#125;            //System.out.println(data);            messageNo ++;        &amp;#125;    &amp;#125;&amp;#125;</code></pre><h3 id="5-消费者工具"><a href="#5-消费者工具" class="headerlink" title="5.消费者工具"></a>5.消费者工具</h3><p><strong>ProtobufKafkaConsumerUtil</strong></p><pre><code class="java">package com.pjy.kafka;import java.util.*;import java.util.concurrent.TimeUnit;import com.google.protobuf.InvalidProtocolBufferException;import com.pjy.serial.PersonTestProtos;import org.apache.commons.lang.exception.ExceptionUtils;import org.apache.log4j.Logger;import kafka.consumer.ConsumerConfig;import kafka.consumer.ConsumerIterator;import kafka.consumer.KafkaStream;import kafka.javaapi.consumer.ConsumerConnector;import kafka.message.MessageAndMetadata;import kafka.serializer.StringDecoder;import kafka.utils.VerifiableProperties;public class ProtobufKafkaConsumerUtil &amp;#123;    private static final Logger LOG = Logger.getLogger(ProtobufKafkaConsumerUtil.class);    public final static String TOPIC = &quot;test_protobuf_pjy&quot;;    private static ConsumerConnector consumer;    private static Thread thread = null;    private static boolean isExit = false;    /*    * 字符串-》字节数组&amp;#123;1,2,3&amp;#125;-&gt;[1,2,3]    * */    public static byte[] stringToBytes(String receive_msg)&amp;#123;        String[] s=receive_msg.split(&quot;,&quot;);        byte[] bytes=new byte[s.length];        for (int i=0;i&lt;=s.length-1;i++)&amp;#123;            if (i==0)&amp;#123;                bytes[i]=Byte.valueOf(s[i].substring(1));            &amp;#125;else if (i==s.length-1)&amp;#123;                bytes[i]=Byte.valueOf(s[i].substring(0,s[i].length()-1));            &amp;#125;else &amp;#123;                bytes[i]=Byte.valueOf(s[i]);            &amp;#125;    &amp;#125;    return bytes;    &amp;#125;    /**     * 反序列化     */    public static void unSerialize(byte[] bytes) throws InvalidProtocolBufferException &amp;#123;        PersonTestProtos.PersonTest personTestResult = PersonTestProtos.PersonTest.parseFrom(bytes);            System.out.println(String.format                    (&quot;反序列化得到的信息:姓名：%s，性别：%d，手机号：%s&quot;,                            personTestResult.getName(),                            personTestResult.getSexValue(),                            personTestResult.getPhone(0).                                    getNumber()));    &amp;#125;    public static void start(String zookeeper_quorum, String zookeeper_timeout, String group_id) &amp;#123;        try &amp;#123;            Properties props = new Properties();            props.put(&quot;zookeeper.connect&quot;, zookeeper_quorum);            props.put(&quot;group.id&quot;, group_id);            props.put(&quot;zookeeper.session.timeout.ms&quot;, zookeeper_timeout);            props.put(&quot;zookeeper.sync.time.ms&quot;, &quot;200&quot;);            props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;);            //props.put(&quot;auto.offset.reset&quot;, &quot;smallest&quot;);            ConsumerConfig config = new ConsumerConfig(props);            consumer = kafka.consumer.Consumer.createJavaConsumerConnector(config);            thread = new Thread(new Runnable() &amp;#123;                @Override                public void run() &amp;#123;                    try &amp;#123;                        Map&lt;String, Integer&gt; topicCountMap = new HashMap&lt;String, Integer&gt;();                        topicCountMap.put(TOPIC, new Integer(1));                        StringDecoder keyDecoder = new StringDecoder(new VerifiableProperties());                        StringDecoder valueDecoder = new StringDecoder(new VerifiableProperties());                        Map&lt;String, List&lt;KafkaStream&lt;String, String&gt;&gt;&gt; consumerMap =                                consumer.createMessageStreams(topicCountMap, keyDecoder, valueDecoder);                        KafkaStream&lt;String, String&gt; partition = consumerMap.get(TOPIC).get(0);                        ConsumerIterator&lt;String, String&gt; it = partition.iterator();                        while(!isExit &amp;&amp; it.hasNext()) &amp;#123;                            try &amp;#123;                                MessageAndMetadata&lt;String, String&gt; item = it.next();                                String receive_msg = item.message();                                unSerialize(stringToBytes(receive_msg));                            &amp;#125; catch (Exception e) &amp;#123;                                //e.printStackTrace();                                LOG.error(new StringBuilder().append(&quot;consumer error happen! cause:&quot;).append(ExceptionUtils.getFullStackTrace(e)));                                continue;                            &amp;#125;                        &amp;#125;                        if(consumer != null)    &amp;#123;                            consumer.shutdown();                            consumer = null;                        &amp;#125;                    &amp;#125; catch (Exception e) &amp;#123;                        //e.printStackTrace();                        LOG.error(new StringBuilder().append(&quot;consumer exit! cause:&quot;).append(ExceptionUtils.getFullStackTrace(e)));                    &amp;#125;                &amp;#125;            &amp;#125;, &quot;my_kafka_consumer&quot;);            thread.setDaemon(false);            thread.start();        &amp;#125; catch (Exception e) &amp;#123;            e.printStackTrace();            LOG.error(&quot;consumer start exception! cause:&quot; + ExceptionUtils.getFullStackTrace(e));        &amp;#125;    &amp;#125;    public void stop() &amp;#123;        try &amp;#123;            isExit = true;            TimeUnit.MILLISECONDS.sleep(3000);            if(thread.isAlive()) &amp;#123;                thread.interrupt();            &amp;#125;        &amp;#125; catch (InterruptedException e) &amp;#123;            LOG.error(ExceptionUtils.getFullStackTrace(e));        &amp;#125; finally &amp;#123;            if(consumer != null) &amp;#123;                consumer.shutdown();                consumer = null;            &amp;#125;        &amp;#125;    &amp;#125;    public static void main(String[] args) &amp;#123;        int messageNo = 1000;        final int COUNT = 10000;        //ProtobufKafkaConsumerUtil.start(&quot;168.2.4.56:2181,168.2.4.57:2181,168.2.4.58:2181&quot;, &quot;3000&quot;, &quot;myGroupID&quot;);        ProtobufKafkaConsumerUtil.start(&quot;10.0.0.16:2181&quot;, &quot;3000&quot;, &quot;myGroupID&quot;);        while (messageNo &lt; COUNT) &amp;#123;            try &amp;#123;                Thread.sleep(1000 * 30);            &amp;#125; catch (InterruptedException e) &amp;#123;                e.printStackTrace();            &amp;#125;        &amp;#125;    &amp;#125;&amp;#125;</code></pre><h3 id="1-proto文件"><a href="#1-proto文件" class="headerlink" title="1.proto文件"></a>1.proto文件</h3><pre><code class="proto">syntax = &quot;proto3&quot;;import &quot;google/protobuf/any.proto&quot;;package pjy.protobuf;option java_package = &quot;com.pjy.serial&quot;;option java_outer_classname=&quot;PersonTestProtos&quot;;message PersonTest &amp;#123;      int32 id = 1;    string name = 2;    string email = 3;      Sex sex = 4;    repeated PhoneNumber phone = 5;    map&lt;string, string&gt; tags = 6;    repeated google.protobuf.Any details = 7;    enum Sex &amp;#123;              DEFAULT = 0;              MALE = 1;              Female = 2;      &amp;#125;      message PhoneNumber &amp;#123;            string number = 1;            PhoneType type = 2;            enum PhoneType &amp;#123;                  MOBILE = 0;                  HOME = 1;                  WORK = 2;            &amp;#125;           &amp;#125;&amp;#125;</code></pre><h3 id="2-Maven坐标"><a href="#2-Maven坐标" class="headerlink" title="2.Maven坐标"></a>2.Maven坐标</h3><pre><code class="maven"> &lt;dependencies&gt;      &lt;dependency&gt;      &lt;groupId&gt;commons-lang&lt;/groupId&gt;      &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;      &lt;version&gt;2.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;      &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;      &lt;version&gt;3.13.0&lt;/version&gt;    &lt;/dependency&gt;      &lt;dependency&gt;          &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;          &lt;artifactId&gt;kafka_2.10&lt;/artifactId&gt;          &lt;version&gt;0.8.0&lt;/version&gt;      &lt;/dependency&gt;    &lt;!-- 日志包 --&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;      &lt;version&gt;1.7.5&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;      &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;      &lt;version&gt;1.7.5&lt;/version&gt;    &lt;/dependency&gt;  &lt;/dependencies&gt;</code></pre><h3 id="3-PersonTestProtos-java"><a href="#3-PersonTestProtos-java" class="headerlink" title="3.PersonTestProtos.java"></a>3.PersonTestProtos.java</h3><p>根据第一个文件自动生成的java类</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;学习笔记&quot;&gt;&lt;a href=&quot;#学习笔记&quot; class=&quot;headerlink&quot; title=&quot;学习笔记&quot;&gt;&lt;/a&gt;学习笔记&lt;/h1&gt;&lt;p&gt;看官方文档看到了负载这个词，特别熟悉但又觉得特别陌生，所以就查了一下负载的释译：&lt;/p&gt;
&lt;p&gt;机械设备以及生理组织等在单位</summary>
      
    
    
    
    <category term="后端" scheme="https://xiaopantongxue816.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>Eclipse</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/02/Eclipse/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/02/Eclipse/</id>
    <published>2020-09-02T08:14:39.000Z</published>
    <updated>2020-09-07T10:58:32.168Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Eclipse创建maven项目"><a href="#Eclipse创建maven项目" class="headerlink" title="Eclipse创建maven项目"></a>Eclipse创建maven项目</h1><p>原文教程：<a href="https://blog.csdn.net/nioqnw/article/details/87177475">https://blog.csdn.net/nioqnw/article/details/87177475</a>  </p><p>超级详细，相比idea有点浪费时间，要配的东西很多</p><h2 id="一-环境"><a href="#一-环境" class="headerlink" title="一.环境"></a>一.环境</h2><p>eclipse  ，jdk 1.8，maven 3.6，tomcat 8.5 </p><h2 id="二-创建步骤"><a href="#二-创建步骤" class="headerlink" title="二.创建步骤"></a>二.创建步骤</h2><p>1.打开eclipse，file—》new —》project，选择Maven—》Maven Project</p><p>点击Next–&gt;点击Next：在Filter输入webapp–&gt;点击Next：</p><p>groupId设置为cn.pjy，artifactId(项目名)设置为Demo，</p><p>依照这个设置，你的包结构最好是cn.pjy.Demo打头的，如果有个StudentDao，它的全路径就是cn.pjy.Demo.dao.StudentDao。</p><p>点击Finish，完成创建!</p><h2 id="三-配置向导"><a href="#三-配置向导" class="headerlink" title="三.配置向导"></a>三.配置向导</h2><p><strong>1.配置项目JDK：</strong></p><p>右击项目名称，Bulid Path—》Configure Bulid Path 选择Libraries：</p><p>选中默认jre ，点击Edit，选择自己的jdk（Workspace default JRE（jdk1.8.0 91））点击Finish</p><p><strong>2.创建默认Maven目录</strong></p><p>默认Maven项目目录应该包含文件夹：src/main/java, src/main/resources , src/test/java , src/test/resources</p><p>创建缺失的文件夹，右击项目—》New—》Source Floder，folder name输入：src/test/resources，点击Finish</p><p>修改OutPut folder ，Bulid Path —》Configure Bulid Path 选择Source，默认</p><p>src/main/java，src/main/resources，选择target/classes;<br>src/test/java ，src/test/resources, 选择target/test-classes;</p><p>双击OutPut folder修改：target/test-classes</p><p>Q1：创建Source Floder失败？</p><p>答:Bulid Path —》Configure Bulid Path 选择Source,将已存在但显示 Missing 或红叉的文件夹删除，在创建。</p><p>Q2：Source Floder颜色偏暗？</p><p>答：Bulid Path —》Configure Bulid Path 选择Source，将偏暗的Source Floder下Contains test sources 的值Yes改为No。</p><p><strong>3.配置Project Facets</strong></p><p>右击项目，Properties—》Project Facets，下图：</p><p>3.1修改Dynamic Web Module版本为3.1，会报错如下：</p><p>解决方法如下：（略）</p><p>3.2修改content directory</p><p>取消Dynamic Web Module前的勾，apply，关闭再进入，勾选，如下图：</p><p>点击进一步设置：Content directory：src/main/webapp</p><p>Q3：Java Resources红叉报错？</p><p>答：1. 在Java Build Path的libraries中，在Java Compiler 中，在Project Facet中统一java版本，我这边是统一设置成1.8</p><p>​       2.其它Java项目第一步设置就没问题了，但是maven项目最好在pom.xml中加入如下代码：</p><pre><code>&lt;plugin&gt;    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;    &lt;version&gt;3.1&lt;/version&gt;     &lt;configuration&gt;        &lt;source&gt;1.8&lt;/source&gt;             &lt;target&gt;1.8&lt;/target&gt;      &lt;/configuration&gt;&lt;/plugin&gt;</code></pre><p>右键项目选maven的Update Project 即可。</p><p>Q4：index.jsp红叉报错？</p><p>答：Bulid Path—》Libraries，点击Add Library，选择Server Runtime，选择配置的tomcat，Finish。</p><p>Q5:web.xml is missing and ‘failOnMissingWebXml’ is set to true报错？</p><p>答：pom.xml加入如下代码：</p><pre><code>      &lt;plugin&gt;             &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;             &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;             &lt;version&gt;3.1&lt;/version&gt;             &lt;configuration&gt;                 &lt;source&gt;1.8&lt;/source&gt;                     &lt;target&gt;1.8&lt;/target&gt;              &lt;/configuration&gt;       &lt;/plugin&gt;</code></pre><p>将项目添加到tomcat，启动，访问成功！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Eclipse创建maven项目&quot;&gt;&lt;a href=&quot;#Eclipse创建maven项目&quot; class=&quot;headerlink&quot; title=&quot;Eclipse创建maven项目&quot;&gt;&lt;/a&gt;Eclipse创建maven项目&lt;/h1&gt;&lt;p&gt;原文教程：&lt;a href=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Protobuf</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/02/Protobuf/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/02/Protobuf/</id>
    <published>2020-09-02T02:14:03.000Z</published>
    <updated>2020-09-07T03:21:28.486Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Protobuf"><a href="#Protobuf" class="headerlink" title="Protobuf"></a>Protobuf</h1><p>序列化工具下载地址：<a href="https://github.com/protocolbuffers/protobuf/releases">https://github.com/protocolbuffers/protobuf/releases</a> </p><h3 id="简易Demo"><a href="#简易Demo" class="headerlink" title="简易Demo"></a>简易Demo</h3><p><strong>1.下载之后，解压到本地，然后配置环境变量</strong></p><pre><code>D:\Program Files\protoc-3.13.0-win64\bin</code></pre><p><strong>2.准备一个User.proto文件，内容如下：</strong> </p><pre><code># 我们定一个User类，下面有4个属性，分别是id,name,age,mobileoption java_outer_classname=&quot;UserProtoBuf&quot;;  //生成java类名option java_package=&quot;com.pjy.serial&quot;;        //对应的包名packagemessage User&amp;#123;                        //message关键字定义了User对象，最后定义了四个属性字段    required int32 id=1;    required string name=2;    optional int32 age=3;    optional string mobile=4;&amp;#125;</code></pre><p><strong>3.在命令行下通过如下命令，生成一个Java类（UserProtoBuf.java）</strong></p><pre><code>D:\EclipseWorkspace\ProtobufDemo\src\main\java&gt;protoc --java_out=. com\pjy\serial\User.proto</code></pre><p><strong>4.在maven工程中加入protobuf-java依赖</strong>（要使用protoc创建的java类，必须要加入protobuf-java这个依赖 ）</p><p><em>！！！注意version要和protoc.exe版本一致，否则会报错</em></p><pre><code class="Maven">&lt;dependency&gt;      &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;      &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;      &lt;version&gt;3.13.0&lt;/version&gt;&lt;/dependency&gt;</code></pre><p><strong>5.测试序列化之后的UserProtoBuf类</strong> </p><pre><code class="java">package com.pjy.serial;import com.pjy.serial.UserProtoBuf.User;public class UserProtoMain &amp;#123;    public static void main(String[] args) &amp;#123;        UserProtoBuf.User.Builder builder = UserProtoBuf.User.newBuilder();        builder.setId(1);        builder.setName(&quot;protoc-java&quot;);        builder.setAge(18);        builder.setMobile(&quot;15011186302&quot;);        User user = builder.build();        System.out.println(user.toString());    &amp;#125;&amp;#125;</code></pre><p>运行成功会打印信息。</p><h3 id="idea-GenProtobuf-插件"><a href="#idea-GenProtobuf-插件" class="headerlink" title="idea GenProtobuf 插件"></a>idea GenProtobuf 插件</h3><p>搜索Genprotobuf插件下载，在main目录下新建proto目录</p><p>右击proto目录 Mark Directory As -&gt;Resouces Root,把编写好的JetProtos.proto文件放在该目录下</p><pre><code class="proto">pjysyntax = &quot;proto3&quot;; // PB协议版本import &quot;google/protobuf/any.proto&quot;; // 引用外部的message，可以是本地的，也可以是此处比较特殊的 Anypackage pjy.protobuf; // 包名，其他 proto 在引用此 proto 的时候，就可以使用 test.protobuf.PersonTest 来使用，// 注意：和下面的 java_package 是两种易混淆概念，同时定义的时候，java_package 具有较高的优先级option java_package = &quot;com.pjy.serial&quot;; // 生成类的包名，注意：会在指定路径下按照该包名的定义来生成文件夹option java_outer_classname=&quot;PersonTestProtos&quot;; // 生成类的类名，注意：下划线的命名会在编译的时候被自动改为驼峰命名message PersonTest &amp;#123;      int32 id = 1; // int 类型      string name = 2; // string 类型      string email = 3;      Sex sex = 4; // 枚举类型      repeated PhoneNumber phone = 5; // 引用下面定义的 PhoneNumber 类型的 message      map&lt;string, string&gt; tags = 6; // map 类型      repeated google.protobuf.Any details = 7; // 使用 google 的 any 类型      // 定义一个枚举      enum Sex &amp;#123;              DEFAULT = 0;              MALE = 1;              Female = 2;      &amp;#125;      // 定义一个 message      message PhoneNumber &amp;#123;            string number = 1;            PhoneType type = 2;            enum PhoneType &amp;#123;                  MOBILE = 0;                  HOME = 1;                  WORK = 2;            &amp;#125;      &amp;#125;&amp;#125;</code></pre><p>菜单栏-》Tools-》Confiure Genprotobuf-&gt;设置生成语言（java）和生成目录（D:\ideaWorkPlace\ProtobufDemo\src\main\java）</p><p>菜单栏-》Tools-》Generate all Protobufs（在目的路径下编译生成java文件）</p><p>Maven引入指定包</p><pre><code class="Maven">&lt;!-- protobuf --&gt;&lt;dependency&gt;         &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;         &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;         &lt;version&gt;3.7.1&lt;/version&gt;&lt;/dependency&gt;</code></pre><pre><code class="java">Main.javapackage com.pjy.serial;import com.google.protobuf.InvalidProtocolBufferException;import java.io.ByteArrayInputStream;import java.io.ByteArrayOutputStream;import java.io.IOException;public class ProtoTestMain &amp;#123;    public static void main(String[] args) &amp;#123;            try &amp;#123;                /** Step1：生成 personTest 对象 */                // personTest 构造器                PersonTestProtos.PersonTest.Builder personBuilder = PersonTestProtos.PersonTest.newBuilder();                // personTest 赋值                personBuilder.setName(&quot;Jet Chen&quot;);                personBuilder.setEmail(&quot;ckk505214992@gmail.com&quot;);                personBuilder.setSex(PersonTestProtos.PersonTest.Sex.MALE);                // 内部的 PhoneNumber 构造器                PersonTestProtos.PersonTest.PhoneNumber.Builder phoneNumberBuilder = PersonTestProtos.PersonTest.PhoneNumber.newBuilder();                // PhoneNumber 赋值                phoneNumberBuilder.setType(PersonTestProtos.PersonTest.PhoneNumber.PhoneType.MOBILE);                phoneNumberBuilder.setNumber(&quot;17717037257&quot;);                // personTest 设置 PhoneNumber                personBuilder.addPhone(phoneNumberBuilder);                // 生成 personTest 对象                PersonTestProtos.PersonTest personTest = personBuilder.build();                /** Step2：序列化和反序列化 */                // 方式一 byte[]：                // 序列化//            byte[] bytes = personTest.toByteArray();                // 反序列化//            PersonTestProtos.PersonTest personTestResult = PersonTestProtos.PersonTest.parseFrom(bytes);//            System.out.println(String.format(&quot;反序列化得到的信息，姓名：%s，性别：%d，手机号：%s&quot;, personTestResult.getName(), personTest.getSexValue(), personTest.getPhone(0).getNumber()));                // 方式二 ByteString：                // 序列化//            ByteString byteString = personTest.toByteString();//            System.out.println(byteString.toString());                // 反序列化//            PersonTestProtos.PersonTest personTestResult = PersonTestProtos.PersonTest.parseFrom(byteString);//            System.out.println(String.format(&quot;反序列化得到的信息，姓名：%s，性别：%d，手机号：%s&quot;, personTestResult.getName(), personTest.getSexValue(), personTest.getPhone(0).getNumber()));                // 方式三 InputStream                // 粘包,将一个或者多个protobuf 对象字节写入 stream                // 序列化                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();                personTest.writeDelimitedTo(byteArrayOutputStream);                // 反序列化，从 steam 中读取一个或者多个 protobuf 字节对象                ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(byteArrayOutputStream.toByteArray());                PersonTestProtos.PersonTest personTestResult = PersonTestProtos.PersonTest.parseDelimitedFrom(byteArrayInputStream);                System.out.println(String.format(&quot;反序列化得到的信息，姓名：%s，性别：%d，手机号：%s&quot;, personTestResult.getName(), personTest.getSexValue(), personTest.getPhone(0).getNumber()));            &amp;#125; catch (InvalidProtocolBufferException e) &amp;#123;                e.printStackTrace();            &amp;#125;catch (IOException e) &amp;#123;                e.printStackTrace();            &amp;#125;        &amp;#125;&amp;#125;</code></pre><p>运行输出</p><pre><code>反序列化得到的信息，姓名：Jet Chen，性别：1，手机号：17717037257</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Protobuf&quot;&gt;&lt;a href=&quot;#Protobuf&quot; class=&quot;headerlink&quot; title=&quot;Protobuf&quot;&gt;&lt;/a&gt;Protobuf&lt;/h1&gt;&lt;p&gt;序列化工具下载地址：&lt;a href=&quot;https://github.com/protocol</summary>
      
    
    
    
    <category term="后端" scheme="https://xiaopantongxue816.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="序列化" scheme="https://xiaopantongxue816.github.io/tags/%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Linux环境下的软件安装</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/01/Linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/01/Linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/</id>
    <published>2020-09-01T02:46:17.000Z</published>
    <updated>2020-09-11T08:53:54.627Z</updated>
    
    <content type="html"><![CDATA[<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a><strong>注意事项</strong></h1><p>实验过程中如果出现⼀些诸如客户端不能连通或访问等问题，可尝试考虑关闭防⽕墙：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service </span><br><span class="line">systemctl disable firewalld.service </span><br></pre></td></tr></table></figure><h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><p><strong>1、准备Git安装包</strong></p><p>github下载地址：<a href="https://github.com/git/git/releases">https://github.com/git/git/releases</a> </p><p>下载好的安装包 git-2.28.0.tar.gz 直接放在了 root ⽬录下 然后将其本地解压，得到 git-2.28.0 ⽬录： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# tar -zxvf git-2.28.0.tar.gz</span><br></pre></td></tr></table></figure><p><strong>2、提前安装可能需要的依赖</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install curl-devel expat-devel gettext-devel openssl-devel zlibdevel gcc-c++ perl-ExtUtils-MakeMaker</span><br></pre></td></tr></table></figure><p><strong>3、编译安装Git</strong></p><p>进⼊到对应⽬录，执⾏配置、编译、安装命令即可 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd git-2.28.0&#x2F;</span><br><span class="line">[root@localhost git-2.26.2]# make configure</span><br><span class="line">[root@localhost git-2.26.2]# .&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;git</span><br><span class="line">[root@localhost git-2.26.2]# make profix&#x3D;&#x2F;usr&#x2F;local&#x2F;git</span><br><span class="line">[root@localhost git-2.26.2]# make install</span><br></pre></td></tr></table></figure><p><strong>4、将Git加入环境变量</strong></p><p>将 Git 的可执⾏程序加⼊环境变量，便于后续使⽤ </p><p>编辑配置⽂件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><p>尾部加⼊ Git 的 bin 路径配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GIT_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;git</span><br><span class="line">export PATH&#x3D;$PATH:$GIT_HOME&#x2F;bin</span><br></pre></td></tr></table></figure><p>使环境变量⽣效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &#x2F;etc&#x2F;profile </span><br></pre></td></tr></table></figure><p><strong>5、查看安装结果</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><h3 id="·"><a href="#·" class="headerlink" title="·"></a>·</h3><ol><li><p>configure是一个shell脚本，生成合适的Makefile文件</p><p>Linux中的Configure选项配置参数详解：<a href="https://www.jb51.net/LINUXjishu/363271.html">https://www.jb51.net/LINUXjishu/363271.html</a> </p></li><li><p>可能出现错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GIT_VERSION &#x3D; 2.19.0</span><br><span class="line">GEN configure</span><br><span class="line">&#x2F;bin&#x2F;sh: autoconf: 未找到命令</span><br><span class="line"> make: *** [configure] 错误 127</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果出现可以通过执行：（安装autoconf安装包及对应的依赖）</span><br><span class="line">yum -y install autoconf（autoconf命令的主要作用是创建configure）</span><br></pre></td></tr></table></figure></li><li><p>./configure –prefix=/usr/local/git 安装在/usr/local/git 下面，执行文件就会安装在/usr/local/git/bin （而不是默认的 /usr/local/bin)，资源文件就会安装在 /usr/local/git/share（而不是默认的/usr/local/share） </p><p>“./configure是用来检测你的安装平台的目标特征的。比如它会检测你是不是有CC或GCC，并不是需要CC或GCC，它是个shell脚本。 ”——-所以应该就是用来检测是windows、Linux、还是Mac的吧</p></li><li><p>make profix=/usr/local/git </p><p>“make是用来编译的，它从Makefile中读取指令，然后编译。 ”</p></li><li><p>make install</p><p>“make install是用来安装的，它也从Makefile中读取指令，安装到指定的位置。 ”</p></li></ol><h1 id="JDK（JAVA环境）"><a href="#JDK（JAVA环境）" class="headerlink" title="JDK（JAVA环境）"></a>JDK（JAVA环境）</h1><p><strong>1.准备JDK安装包</strong></p><p>下载地址：</p><p>官网 ：<a href="https://www.oracle.com/java/technologies/javase-downloads.html">https://www.oracle.com/java/technologies/javase-downloads.html</a>  </p><p>华为镜像 ：<a href="https://repo.huaweicloud.com/java/jdk/">https://repo.huaweicloud.com/java/jdk/</a>  </p><p>下载了jdk-8u181-linux-x64.tar.gz 安装包，直接放在了 root ⽬录下 </p><p><strong><em>2.卸载已有的OPENJDK（如果有）</em></strong></p><p>如果系统⾃带有 OpenJDK ，可以按照如下步骤提前卸载。</p><p> ⾸先查找已经安装的 OpenJDK 包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep java </span><br></pre></td></tr></table></figure><p> 接下来可以将 java 开头的安装包均卸载即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove java-1.7.0-openjdk-1.7.0.141-2.6.10.5.el7.x86_64</span><br><span class="line">yum -y remove java-1.8.0-openjdk-1.8.0.131-11.b12.el7.x86_64</span><br><span class="line">... 省略 ...</span><br></pre></td></tr></table></figure><p><strong>3.创建⽬录并解压</strong></p><p>1、在 /usr/local/ 下创建 java ⽂件夹并进⼊ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line">mkdir java</span><br><span class="line">cd java</span><br></pre></td></tr></table></figure><p>2、将上⾯准备好的 JDK 安装包解压到 /usr/local/java 中即可 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf &#x2F;root&#x2F;jdk-8u181-linux-x64.tar.gz -C .&#x2F;</span><br></pre></td></tr></table></figure><p>解压完之后， /usr/local/java ⽬录中会出现⼀个 jdk1.8.0_181 的⽬录 </p><p><strong>4.配置JDK环境变量</strong></p><p>编辑 /etc/profile ⽂件，在⽂件尾部加⼊如下 JDK 环境配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java&#x2F;jdk1.8.0_181</span><br><span class="line">CLASSPATH&#x3D;$JAVA_HOME&#x2F;lib&#x2F;</span><br><span class="line">PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin</span><br><span class="line">export PATH JAVA_HOME CLASSPATH</span><br></pre></td></tr></table></figure><p>然后执⾏如下命令让环境变量⽣效 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><p><strong>5.验证JDK安装结果</strong></p><p>输⼊如下命令即可检查安装结果： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br><span class="line">javac</span><br></pre></td></tr></table></figure><h3 id="·-1"><a href="#·-1" class="headerlink" title="·"></a>·</h3><ol><li><p>tar -zxvf /root/jdk-8u181-linux-x64.tar.gz -C ./ </p><table><thead><tr><th align="center">指令</th><th>含义</th></tr></thead><tbody><tr><td align="center">-z</td><td>通过gzip指令压缩/解压缩文件，文件名最好为*.tar.gz</td></tr><tr><td align="center">-x</td><td>从归档文件中提取文件</td></tr><tr><td align="center">-v</td><td>显示指令执行过程</td></tr><tr><td align="center">-f&lt;备份文件&gt;</td><td>指定备份文件</td></tr><tr><td align="center">-C &lt;目录&gt;</td><td>切换工作目录，先进入指定目录再执行压缩/解压缩操作，可用于仅压缩特定目录里的内容或解压缩到特定目录</td></tr></tbody></table></li></ol><h1 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h1><p><strong>1.⾸先准备安装包</strong></p><p>下载地址：<a href="https://mirrors.huaweicloud.com/mysql/Downloads/MySQL-5.7/">https://mirrors.huaweicloud.com/mysql/Downloads/MySQL-5.7/</a> </p><p> 这⾥下载的是 mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz 安装包，直接放在了 root ⽬录下 </p><p><strong><em>2.卸载系统⾃带的MARIADB（如果有）</em></strong></p><p>如果系统之前⾃带 Mariadb ，可以先卸载</p><p>查询已安装的 Mariadb 安装包： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mariadb</span><br></pre></td></tr></table></figure><p>将其均卸载： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove mariadb-server-5.5.56-2.el7.x86_64</span><br><span class="line">yum -y remove mariadb-5.5.56-2.el7.x86_64</span><br><span class="line">yum -y remove mariadb-devel-5.5.56-2.el7.x86_64</span><br><span class="line">yum -y remove mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure><p><strong>3.解压MYSQL安装包</strong></p><p>将上⾯准备好的 MySQL 安装包解压到 /usr/local/ ⽬录，并重命名为 mysql </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf &#x2F;root&#x2F;mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz -C &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line">mv mysql-5.7.31-linux-glibc2.12-x86_64 mysql</span><br></pre></td></tr></table></figure><p><strong>4.创建MYSQL⽤户和⽤户组</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -g mysql mysql</span><br></pre></td></tr></table></figure><p>同时新建 /usr/local/mysql/data ⽬录，后续备⽤ </p><p><strong>5.修改MYSQL⽬录的归属⽤户</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# chown -R mysql:mysql .&#x2F;</span><br></pre></td></tr></table></figure><p><strong>6.准备MYSQL的配置⽂件</strong></p><p>在 /etc ⽬录下新建 my.cnf ⽂件 </p><p>写⼊如下简化配置： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line"># 设置mysql客户端默认字符集</span><br><span class="line">default-character-set&#x3D;utf8</span><br><span class="line">socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock</span><br><span class="line">[mysqld]</span><br><span class="line">skip-name-resolve</span><br><span class="line">#设置3306端⼝</span><br><span class="line">port &#x3D; 3306</span><br><span class="line">socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock</span><br><span class="line"># 设置mysql的安装⽬录</span><br><span class="line">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line"># 设置mysql数据库的数据的存放⽬录</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line"># 允许最⼤连接数</span><br><span class="line">max_connections&#x3D;200</span><br><span class="line"># 服务端使⽤的字符集默认为8⽐特编码的latin1字符集</span><br><span class="line">character-set-server&#x3D;utf8</span><br><span class="line"># 创建新表时将使⽤的默认存储引擎</span><br><span class="line">default-storage-engine&#x3D;INNODB</span><br><span class="line">lower_case_table_names&#x3D;1</span><br><span class="line">max_allowed_packet&#x3D;16M</span><br></pre></td></tr></table></figure><p>同时使⽤如下命令创建 /var/lib/mysql ⽬录，并修改权限： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class="line">chmod 777 &#x2F;var&#x2F;lib&#x2F;mysql</span><br></pre></td></tr></table></figure><p><strong>7.正式开始安装MYSQL</strong></p><p>执⾏如下命令正式开始安装： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">.&#x2F;bin&#x2F;mysqld --initialize --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br></pre></td></tr></table></figure><p><strong>注意：记住上⾯打印出来的 root 的密码，后⾯⾸次登陆需要使⽤</strong> b=iqYXuZh5YX</p><p><strong>8.复制启动脚本到资源⽬录</strong></p><p>执⾏如下命令复制 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# cp .&#x2F;support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysqld</span><br></pre></td></tr></table></figure><p>并修改 /etc/init.d/mysqld ，修改其 basedir 和 datadir 为实际对应⽬录： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br></pre></td></tr></table></figure><p><strong>9.设置MYSQL系统服务并开启⾃启</strong></p><p>⾸先增加 mysqld 服务控制脚本执⾏权限： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x &#x2F;etc&#x2F;init.d&#x2F;mysqld</span><br></pre></td></tr></table></figure><p>同时将 mysqld 服务加⼊到系统服务： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add mysqld</span><br></pre></td></tr></table></figure><p>最后检查 mysqld 服务是否已经⽣效即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list mysqld</span><br></pre></td></tr></table></figure><p>这样就表明 mysqld 服务已经⽣效了，在2、3、4、5运⾏级别随系统启动⽽⾃动启动，以后可以直接使 </p><p>⽤ service 命令控制 mysql 的启停。</p><p><strong>10.启动MYSQLD</strong></p><p>直接执⾏ ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure><p><strong>11.将 MYSQL 的 BIN ⽬录加⼊ PATH 环境变量</strong></p><p>这样⽅便以后在任意⽬录上都可以使⽤ mysql 提供的命令。 </p><p>编辑 ~/.bash_profile ⽂件，在⽂件末尾处追加如下信息:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin</span><br></pre></td></tr></table></figure><p>最后执⾏如下命令使环境变量⽣效 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~&#x2F;.bash_profile</span><br></pre></td></tr></table></figure><p><strong>12.⾸次登陆MYSQL</strong></p><p>以 root 账户登录 mysql ，使⽤上⽂安装完成提示的密码进⾏登⼊</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p><strong>13.接下来修改ROOT账户密码</strong></p><p>在mysql的命令⾏执⾏如下命令即可，密码可以换成你想⽤的密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;alter user user() identified by &quot;root&quot;;</span><br><span class="line">mysql&gt;flush privileges;</span><br></pre></td></tr></table></figure><p>⽐如这⾥将密码设置成简单的“root”了</p><p><strong>14.设置远程主机登录</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; update user set user.Host&#x3D;&#39;%&#39; where user.User&#x3D;&#39;root&#39;;</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure><h3 id="·-2"><a href="#·-2" class="headerlink" title="·"></a>·</h3><p>1.在执行 service mysqld start  的时候报错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqld_safe Directory &#39;&#x2F;var&#x2F;lib&#x2F;mysql&#39; for UNIX socket file don&#39;t exists.</span><br><span class="line">The server quit without updating PID file (&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;localhost.localdomain.pid).</span><br></pre></td></tr></table></figure><p>解决方案一：selinux惹的祸，如果是centos系统，默认会开启selinux 解决方法：关闭它，打开/etc/selinux/config，把SELINUX=enforcing改为SELINUX=disabled后存盘退出重启机器试试。 （没用）</p><p>解决方案二：可能进程里已经存在mysql进程 解决方法：用命令“ps -ef|grep mysqld”查看是否有mysqld进程，如果有使用“kill -9  进程号”杀死，然后重新启动mysqld！ （重新连接机器 mysqld还是会自动启）</p><p>解决方案三：3.可能是第二次在机器上安装mysql，有残余数据影响了服务的启动。 解决方法：去mysql的数据目录/data看看，如果存在mysql-bin.index，就赶快把它删除掉吧，它就是罪魁祸首了。 （查看了没有）</p><p>解决方案四：skip-federated字段问题 解决方法：检查一下/etc/my.cnf文件中有没有没被注释掉的skip-federated字段，如果有就立即注释掉。（没有该字段） </p><p>…..后来我发现是安装漏掉了两步错误就在打出的日志上不知道我为什么选择视而不见</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class="line">chmod 777 &#x2F;var&#x2F;lib&#x2F;mysql</span><br></pre></td></tr></table></figure><p>参考文章：</p><p>Linux下改动mysql的存储目录后，mysql无法启动：<a href="https://bbs.csdn.net/topics/340205817">https://bbs.csdn.net/topics/340205817</a> </p><p>The server quit without updating PID file (/usr/local/<a href="https://edu.aliyun.com/jiaocheng/1107">my</a><a href="https://edu.aliyun.com/jiaocheng/1043">sql</a>/var/xxx.pid). … failed错误解决 ：</p><p> <a href="https://blog.csdn.net/zhou75771217/article/details/82893997">https://blog.csdn.net/zhou75771217/article/details/82893997</a> </p><p>2.在远程连接数据库时出现问题</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">错误码：2003</span><br><span class="line">Can’t connect to MySQL server on </span><br></pre></td></tr></table></figure><p>导致这个问题可能有两个原因：</p><ol><li><p>远程访问没有启动（错误号码：2003）实际已启动（在第14步）</p></li><li><p>虚拟机防火墙没有关闭</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CentOS7 的防火墙配置</span><br><span class="line"># 查看防火墙状态</span><br><span class="line">systemctl status firewalld</span><br><span class="line"># 关闭防火墙：</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"># 开启防火墙：</span><br><span class="line">systemctl start firewalld.service</span><br><span class="line"># 关闭开机启动：</span><br><span class="line">systemctl disable firewalld.service</span><br><span class="line"># 开启开机启动：</span><br><span class="line">systemctl enable firewalld.service</span><br></pre></td></tr></table></figure><p>参考原文：<a href="https://blog.csdn.net/xc_zhou/article/details/80879810">https://blog.csdn.net/xc_zhou/article/details/80879810</a> </p></li></ol><h1 id="Maven项⽬构建和管理⼯具安装"><a href="#Maven项⽬构建和管理⼯具安装" class="headerlink" title="Maven项⽬构建和管理⼯具安装"></a>Maven项⽬构建和管理⼯具安装</h1><p><strong>1.准备MAVEN安装包并解压</strong></p><p>下载地址（华为云镜像）：<a href="https://mirrors.huaweicloud.com/apache/maven/maven-3/3.6.3/binaries/">https://mirrors.huaweicloud.com/apache/maven/maven-3/3.6.3/binaries/</a></p><p>将下载的 apache-maven-3.6.3-bin.tar.gz 安装包，放置于提前创建好的 /opt/maven ⽬录下。</p><p> 执⾏命令解压：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf apache-maven-3.6.3-bin.tar.gz</span><br></pre></td></tr></table></figure><p> 即可在当前⽬录得到 /opt/maven/apache-maven-3.6.3 ⽬录 </p><p><strong>2.配置MAVEN加速镜像源</strong></p><p>这⾥配置的是阿⾥云的maven镜像源。编辑修改 /opt/maven/apache-maven-3.6.3/conf/settings.xml ⽂件，在标签对⾥添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3.配置环境变量</strong></p><p>因为下载的是⼆进制版安装包，所以解压完，配置好环境变量即可使⽤了。 编辑修改 /etc/profile ⽂件，在⽂件尾部添加如下内容，配置 maven 的安装路径 :</p><figure class="highlight profile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export MAVEN_HOME=/opt/maven/apache-maven<span class="number">-3.6</span><span class="number">.3</span></span><br><span class="line">export PATH=$MAVEN_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p> 刷新环境变量，让 maven 环境的路径配置⽣效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><p>检验安装结果 ,能打印出 maven 版本信息说明安装、配置成功 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn –v</span><br></pre></td></tr></table></figure><h1 id="应⽤服务器Tomcat"><a href="#应⽤服务器Tomcat" class="headerlink" title="应⽤服务器Tomcat"></a>应⽤服务器Tomcat</h1><p><strong>1.准备安装包</strong></p><p>下载地址：<a href="https://tomcat.apache.org/download-80.cgi">https://tomcat.apache.org/download-80.cgi</a></p><p>这⾥使⽤的是 8.5.57 版： apache-tomcat-8.5.57.tar.gz ，直接将其放在了 /root ⽬录下 </p><p>在 /usr/local/ 下创建 tomcat ⽂件夹并进⼊ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line">mkdir tomcat</span><br><span class="line">cd tomcat</span><br></pre></td></tr></table></figure><p>将 Tomcat 安装包解压到 /usr/local/tomcat </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tomcat]# tar -zxvf &#x2F;root&#x2F;apache-tomcat-8.5.57.tar.gz -C .&#x2F;</span><br></pre></td></tr></table></figure><p>解压完之后， /usr/local/tomcat ⽬录中会出现⼀个 apache-tomcat-8.5.57 的⽬录 </p><p><strong>2.启动TOMCAT</strong></p><p>直接进 apache-tomcat-8.5.57 ⽬录，执⾏其中 bin ⽬录下的启动脚本即可 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8.5.57[root@localhost apache-tomcat-8.5.57]# cd bin&#x2F;</span><br><span class="line">[root@localhost bin]# .&#x2F;startup.sh</span><br></pre></td></tr></table></figure><p>浏览器访问： 你的主机IP:8080 </p><p><strong>3.配置快捷操作和开机启动</strong></p><p>⾸先进⼊ /etc/rc.d/init.d ⽬录，创建⼀个名为 tomcat 的⽂件，并赋予执⾏权限 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;</span><br><span class="line">[root@localhost init.d]# touch tomcat</span><br><span class="line">[root@localhost init.d]# chmod +x tomcat</span><br></pre></td></tr></table></figure><p>接下来编辑 tomcat ⽂件，并在其中加⼊如下内容： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#chkconfig:- 20 90</span><br><span class="line">#description:tomcat</span><br><span class="line">#processname:tomcat</span><br><span class="line">TOMCAT_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;apache-tomcat-8.5.57</span><br><span class="line">case $1 in</span><br><span class="line"> start) su root $TOMCAT_HOME&#x2F;bin&#x2F;startup.sh;;</span><br><span class="line"> stop) su root $TOMCAT_HOME&#x2F;bin&#x2F;shutdown.sh;;</span><br><span class="line"> *) echo &quot;require start|stop&quot; ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>这样后续对于Tomcat的开启和关闭只需要执⾏如下命令即可： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service tomcat start</span><br><span class="line">service tomcat stop</span><br></pre></td></tr></table></figure><p>最后加⼊开机启动即可： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add tomcat</span><br><span class="line">chkconfig tomcat on</span><br></pre></td></tr></table></figure><h3 id="·-3"><a href="#·-3" class="headerlink" title="·"></a>·</h3><p>1.报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Neither the JAVA_HOME nor the JRE_HOME environment variable is defined</span><br><span class="line">At least one of these environment variable is needed to run this program</span><br></pre></td></tr></table></figure><p>解决：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;apache-tomcat-8.5.57&#x2F;bin</span><br><span class="line">vim setclasspath.sh </span><br><span class="line"># 加入两行</span><br><span class="line">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java&#x2F;jdk1.8.0_181</span><br><span class="line">export JRE_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java&#x2F;jdk1.8.0_181&#x2F;jre</span><br><span class="line">保存退出</span><br></pre></td></tr></table></figure><p>原文：<a href="https://blog.csdn.net/zoiery/article/details/83589489?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param">https://blog.csdn.net/zoiery/article/details/83589489?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param</a></p><h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><p>下载地址：<a href="https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.6.1">https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.6.1</a></p><p><strong>1.准备安装包</strong></p><p> 下载apache-zookeeper-3.6.1-bin.tar.gz 压缩包，并将其放在 了 /root ⽬录下 </p><p><strong>2.解压并安装</strong></p><p> 在 /usr/local/ 下创建 zookeeper ⽂件夹并进⼊ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line">mkdir zookeeper</span><br><span class="line">cd zookeeper</span><br></pre></td></tr></table></figure><p>将 ZooKeeper 安装包解压到 /usr/local/zookeeper 中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zookeeper]# tar -zxvf &#x2F;root&#x2F;apache-zookeeper-3.6.1-</span><br><span class="line">bin.tar.gz -C .&#x2F;</span><br></pre></td></tr></table></figure><p>解压完之后， /usr/local/zookeerper ⽬录中会出现⼀个 apache-zookeeper-3.6.1-bin 的⽬录 </p><p><strong>3.创建DATA⽬录</strong> </p><p>直接在 /usr/local/zookeeper/apache-zookeeper-3.6.1-bin ⽬录中创建⼀个 data ⽬录 ,等下该 data ⽬录地址要配到 ZooKeeper 的配置⽂件中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;apache-zookeeper-3.6.1-bin&#x2F;data</span><br></pre></td></tr></table></figure><p><strong>4.创建配置⽂件并修改</strong> </p><p>进⼊到 zookeeper 的 conf ⽬录，复制 zoo_sample.cfg 得到 zoo.cfg ： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost apache-zookeeper-3.6.1-bin]# cd conf&#x2F;</span><br><span class="line">[root@localhost conf]# cp zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure><p>修改配置⽂件 zoo.cfg ，将其中的 dataDir 修改为上⾯刚创建的 data ⽬录，其他选项可以按需配置 </p><p><strong>5.启动ZOOKEEPER</strong> </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost apache-zookeeper-3.6.1-bin]# .&#x2F;bin&#x2F;zkServer.sh start</span><br></pre></td></tr></table></figure><p>启动后可以通过如下命令来检查启动后的状态： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost apache-zookeeper-3.6.1-bin]# .&#x2F;bin&#x2F;zkServer.sh status</span><br></pre></td></tr></table></figure><p>从图中也可以看出zookeeper默认会绑定端⼝ 2181 </p><p><strong>6.配置环境变量</strong></p><p> 编辑配置⽂件： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><p>尾部加⼊ ZooKeeper 的 bin 路径配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ZOOKEEPER_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;apache-zookeeper-3.6.1-bin</span><br><span class="line">export PATH&#x3D;$PATH:$ZOOKEEPER_HOME&#x2F;bin</span><br></pre></td></tr></table></figure><p>最后执⾏ source /etc/profile 使环境变量⽣效。</p><p><strong>7.设置开机⾃启</strong> </p><p>⾸先进⼊ /etc/rc.d/init.d ⽬录，创建⼀个名为 zookeeper 的⽂件，并赋予执⾏权限 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;</span><br><span class="line">[root@localhost init.d]# touch zookeeper</span><br><span class="line">[root@localhost init.d]# chmod +x zookeeper</span><br></pre></td></tr></table></figure><p>接下来编辑 zookeeper ⽂件，并在其中加⼊如下内容： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#chkconfig:- 20 90</span><br><span class="line">#description:zookeeper</span><br><span class="line">#processname:zookeeper</span><br><span class="line">ZOOKEEPER_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;apache-zookeeper-3.6.1-bin</span><br><span class="line">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java&#x2F;jdk1.8.0_161 # 此处根据你的实际情况更换对</span><br><span class="line">应</span><br><span class="line">case $1 in</span><br><span class="line"> start) su root $ZOOKEEPER_HOME&#x2F;bin&#x2F;zkServer.sh start;;</span><br><span class="line"> stop) su root $ZOOKEEPER_HOME&#x2F;bin&#x2F;zkServer.sh stop;;</span><br><span class="line"> status) su root $ZOOKEEPER_HOME&#x2F;bin&#x2F;zkServer.sh status;;</span><br><span class="line"> restart) su root $ZOOKEEPER_HOME&#x2F;bin&#x2F;zkServer.sh restart;;</span><br><span class="line"> *) echo &quot;require start|stop|status|restart&quot; ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>最后加⼊开机启动即可： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add zookeeper</span><br><span class="line">chkconfig zookeeper on</span><br></pre></td></tr></table></figure><h3 id="·-4"><a href="#·-4" class="headerlink" title="·"></a>·</h3><p>1.启动的时候显示成功了,查看状态的时候却报错了: </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# zkServer.sh start</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: &#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;apache-zookeeper-3.6.1-bin&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br><span class="line">[root@localhost ~]# zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: &#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;apache-zookeeper-3.6.1-bin&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg</span><br><span class="line">Client port found: 2181. Client address: localhost.</span><br><span class="line">Error contacting service. It is probably not running.</span><br></pre></td></tr></table></figure><p>rm version-2</p><p>[root@localhost conf]# ps -ef|grep 2181<br>root       2550   1849  0 09:26 pts/0    00:00:00 grep –color=auto 2181</p><p>kill -9 1849</p><h1 id="消息队列Kafka"><a href="#消息队列Kafka" class="headerlink" title="消息队列Kafka"></a>消息队列Kafka</h1><p>因为 Kafka 的运⾏环境依赖于 ZooKeeper ，所以⾸先得安装并运⾏ ZooKeeper 。 </p><p>下载地址：<a href="http://archive.apache.org/dist/kafka">http://archive.apache.org/dist/kafka</a></p><p><strong>2.准备KAFKA安装包</strong></p><p>这⾥下载的是 2.5.0 版： kafka_2.12-2.5.0.tgz ，将下载后的安装包放在了 /root ⽬录下 </p><p><strong>3.解压并安装</strong> </p><p> /usr/local/ 下创建 kafka ⽂件夹并进⼊ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line">mkdir kafka</span><br><span class="line">cd kafka</span><br></pre></td></tr></table></figure><p>将Kafka安装包解压到 /usr/local/kafka 中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost kafka]# tar -zxvf &#x2F;root&#x2F;kafka_2.12-2.5.0.tgz -C .&#x2F;</span><br></pre></td></tr></table></figure><p>解压完之后， /usr/local/kafka ⽬录中会出现⼀个 kafka_2.12-2.5.0 的⽬录 </p><p><strong>4.创建LOGS⽬录</strong></p><p> 这⾥直接在 /usr/local/kafka/kafka_2.12-2.5.0 ⽬录中创建⼀个 logs ⽬录, 等下该 logs ⽬录地址要配到Kafka的配置⽂件中。 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka_2.12-2.5.0&#x2F;logs</span><br></pre></td></tr></table></figure><p><strong>5.修改配置⽂件</strong> </p><p>进⼊到 Kafka 的 config ⽬录，编辑配置⽂件 server.properties </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost kafka_2.12-2.5.0]# cd config&#x2F;</span><br><span class="line">[root@localhost config]# vim server.properties</span><br></pre></td></tr></table></figure><p>修改配置⽂件，⼀是将其中的 log.dirs 修改为上⾯刚创建的 logs ⽬录，其他选项可以按需配置 </p><p>另外关注⼀下连接 ZooKeeper 的相关配置，根据实际情况进⾏配置： </p><p><strong>6.启动KAFKA</strong> </p><p>执⾏</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;kafka-server-start.sh .&#x2F;config&#x2F;server.properties</span><br></pre></td></tr></table></figure><p>如果需要后台启动，则加上 -daemon 参数即可 </p><p><strong>7.实验验证</strong></p><p> ⾸先创建⼀个名为 codesheep 的 topic ： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;kafka-topics.sh --create --bootstrap-server 192.168.220.10:9092 --replication-factor 1 --partitions 1 --topic codesheep</span><br></pre></td></tr></table></figure><p>创建完成以后，可以使⽤命令来列出⽬前已有的 topic 列表 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;kafka-topics.sh --list --bootstrap-server 192.168.220.10:9092</span><br></pre></td></tr></table></figure><p>用两个终端模拟生产者和消费者：</p><p>创建⼀个⽣产者，⽤于在 codesheep 这个 topic 上⽣产消息： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;^C[root@localhost kafka_2.12-2.5.0]# .&#x2F;bin&#x2F;kafka-console-producer.sh --bootstrap-server 192.168.220.10:9092 --topic codesheep</span><br><span class="line">&gt;hello world!</span><br><span class="line">&gt;hello code sheep</span><br></pre></td></tr></table></figure><p>⽽后接着创建⼀个消费者，⽤于在 codesheep 这个 topic 上获取消息： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> [root@localhost kafka_2.12-2.5.0]# .&#x2F;bin&#x2F;kafka-console-consumer.sh --bootstrap-server 192.168.220.10:9092 --topic codesheep</span><br><span class="line">hello world!</span><br><span class="line">hello code sheep</span><br></pre></td></tr></table></figure><p>此时⽣产者发出的消息，在消费者端可以获取到。</p><h3 id="·-5"><a href="#·-5" class="headerlink" title="·"></a>·</h3><p>1.启动kafka时报错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[2020-09-08 09:01:57,172] INFO Socket error occurred: 192.168.220.10&#x2F;192.168.220.10:2181: 拒绝连接 (org.apache.zookeeper.ClientCnxn)</span><br><span class="line">[2020-09-08 09:01:58,300] INFO Opening socket connection to server 192.168.220.10&#x2F;192.168.220.10:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)</span><br></pre></td></tr></table></figure><p>防火墙已关</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zookeeper]# systemctl status firewalld</span><br><span class="line">● firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;firewalld.service; disabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line">     Docs: man:firewalld(1)</span><br></pre></td></tr></table></figure><p>到目录下查看日志</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;apache-zookeeper-3.6.1-bin&#x2F;logs</span><br><span class="line"> vim zookeeper-root-server-localhost.localdomain.out </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 报错内容</span><br><span class="line">Caused by: java.io.IOException: Failed to bind to &#x2F;0.0.0.0:8080</span><br><span class="line">        at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:346)</span><br><span class="line">        at org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:307)</span><br><span class="line">        Caused by: java.net.BindException: 地址已在使用</span><br><span class="line">        at sun.nio.ch.Net.bind0(Native Method)</span><br><span class="line">        at sun.nio.ch.Net.bind(Net.java:433)</span><br><span class="line">        at sun.nio.ch.Net.bind(Net.java:425)</span><br><span class="line">        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)</span><br><span class="line">        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)</span><br><span class="line">        at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:342)</span><br><span class="line">        ... 12 more</span><br><span class="line"> Unable to start AdminServer, exiting abnormally</span><br><span class="line">2020-09-08 10:21:37,612 [myid:] - INFO  [main:ZKAuditProvider@42] - ZooKeeper audit is disabled.</span><br><span class="line">2020-09-08 10:21:37,614 [myid:] - ERROR [main:ServiceUtils@42] - Exiting JVM with code 4</span><br></pre></td></tr></table></figure><p>端口被占用</p><p>解决：在zoo.cfg文件中添加一行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin.serverPort&#x3D;9090（未使用的端口）</span><br></pre></td></tr></table></figure><p>原文：<a href="https://www.pianshen.com/article/8473965843/">https://www.pianshen.com/article/8473965843/</a></p><p>2.启动kafka时报错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[2020-09-08 10:31:59,624] WARN [Controller id&#x3D;0, targetBrokerId&#x3D;0] Connection to node 0 (&#x2F;192.168.220.10:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)</span><br></pre></td></tr></table></figure><p>解决：添加 listeners=PLAINTEXT://192.168.220.10:9092</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka_2.12-2.5.0&#x2F;config</span><br><span class="line">vim server.properties </span><br></pre></td></tr></table></figure><p>将localhost改成ip即可，可能localhost没配置，kafka不认。 </p><p>3.创建⼀个名为 codesheep 的 topic 时报错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[2020-09-08 10:52:35,149] WARN [AdminClient clientId&#x3D;adminclient-1] Connection to node -1 (localhost&#x2F;127.0.0.1:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)</span><br></pre></td></tr></table></figure><p>我输入的命令是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic codesheep</span><br></pre></td></tr></table></figure><p>正确的应该是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;kafka-topics.sh --create --bootstrap-server 192.168.220.10:9092 --replication-factor 1 --partitions 1 --topic codesheep</span><br></pre></td></tr></table></figure><h1 id="python环境"><a href="#python环境" class="headerlink" title="python环境"></a>python环境</h1><p>CentOS 7.4 默认⾃带了⼀个 Python2.7 环境： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python(可以直接查看版本)</span><br><span class="line">2.7.5</span><br></pre></td></tr></table></figure><p>下载地址：<a href="https://www.python.org/downloads/release">https://www.python.org/downloads/release</a></p><p><strong>1.准备PYTHON3安装包并解压</strong> </p><p>下载了 Python-3.8.3.tgz 安装包，并将其直接放在了 /root ⽬录下解压，得到⽂件夹： Python-3.8.3 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf Python-3.8.3.tgz</span><br></pre></td></tr></table></figure><p><strong>2.安装相关预备环境</strong> </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlitedevel readline-devel tk-devel gcc make</span><br></pre></td></tr></table></figure><p><strong>3.编译并安装</strong> </p><p>指定了安装⽬录为 /usr/local/python3 ，有需要可以⾃定义 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd Python-3.8.3&#x2F;</span><br><span class="line">.&#x2F;configure prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;python3</span><br><span class="line">make &amp;&amp; make install（这个要等一会了）</span><br></pre></td></tr></table></figure><p>等安装过程完毕， /usr/local/python3 ⽬录就会⽣成了 </p><p><strong>4.添加软链接</strong> （我还是不知道这个到底是干什么用的）</p><p>将刚刚安装⽣成的⽬录 /usr/local/python3 ⾥的 python3 可执⾏⽂件做⼀份软链接，链 接到 /usr/bin 下，⽅便后续使⽤python3 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;bin&#x2F;python3</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;pip3 &#x2F;usr&#x2F;bin&#x2F;pip3</span><br></pre></td></tr></table></figure><p><strong>5.验证安装</strong> </p><p>命令⾏输⼊ python3 ，即可查看 Python3 版本的安装结果 </p><p>⽽输⼊ python ，依然还是 python2.7.5 环境 </p><h1 id="anaconda3"><a href="#anaconda3" class="headerlink" title="anaconda3"></a>anaconda3</h1><h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><p>（删除的时候 除了删除包还要删除.condarc 文件）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda info        #找到基本文件所在位置</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf anaconda3&#x2F;        # 删除anaconda3文件夹</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">rm &#x2F;root&#x2F;.condarc        # 删除.condarc 文件</span><br><span class="line">vim  ~&#x2F;.bashrc            # 删除以下内容</span><br><span class="line"></span><br><span class="line"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span><br><span class="line"># !! Contents within this block are managed by &#39;conda init&#39; !!</span><br><span class="line">__conda_setup&#x3D;&quot;$(&#39;&#x2F;opt&#x2F;anaconda3&#x2F;bin&#x2F;conda&#39; &#39;shell.bash&#39; &#39;hook&#39; 2&gt; &#x2F;dev&#x2F;null)&quot;</span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">    eval &quot;$__conda_setup&quot;</span><br><span class="line">else</span><br><span class="line">    if [ -f &quot;&#x2F;opt&#x2F;anaconda3&#x2F;etc&#x2F;profile.d&#x2F;conda.sh&quot; ]; then</span><br><span class="line">        . &quot;&#x2F;opt&#x2F;anaconda3&#x2F;etc&#x2F;profile.d&#x2F;conda.sh&quot;</span><br><span class="line">    else</span><br><span class="line">        export PATH&#x3D;&quot;&#x2F;opt&#x2F;anaconda3&#x2F;bin:$PATH&quot;</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line">unset __conda_setup</span><br><span class="line"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>效果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(base) [root@SANDBOX opt]# conda -V</span><br><span class="line">-bash: &#x2F;opt&#x2F;anaconda3&#x2F;bin&#x2F;conda: 没有那个文件或目录</span><br><span class="line">(base) [root@SANDBOX opt]# conda info</span><br><span class="line">-bash: &#x2F;opt&#x2F;anaconda3&#x2F;bin&#x2F;conda: 没有那个文件或目录</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash Anaconda3-5.3.1-Linux-x86_64.sh </span><br></pre></td></tr></table></figure><p>执行上面命令然后一路<code>enter(1)|yes(2)</code> 中间可以在这个时候输入位置不安装默认，因为我一开始安装到默认但是找不到anaconda3这个文件夹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Anaconda3 will now be installed into this location:</span><br><span class="line">&#x2F;root&#x2F;anaconda3</span><br><span class="line"></span><br><span class="line">  - Press ENTER to confirm the location</span><br><span class="line">  - Press CTRL-C to abort the installation</span><br><span class="line">  - Or specify a different location below</span><br><span class="line"></span><br><span class="line">[&#x2F;root&#x2F;anaconda3] &gt;&gt;&gt; &#x2F;opt&#x2F;anaconda3</span><br></pre></td></tr></table></figure><p>接着再输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Do you wish the installer to initialize Anaconda3</span><br><span class="line">in your &#x2F;root&#x2F;.bashrc ? [yes|no]</span><br><span class="line">[no] &gt;&gt;&gt; yes</span><br><span class="line"></span><br><span class="line">.........................................................................</span><br><span class="line"></span><br><span class="line">Do you wish to proceed with the installation of Microsoft VSCode? [yes|no]</span><br><span class="line">&gt;&gt;&gt; no</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>安装完成后，直接输入<code>conda</code>应该会提示下面消息，再执行：<code>source ~/.bashrc</code>，之后就可以用了。 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-bash: &#x2F;opt&#x2F;yes&#x2F;bin&#x2F;conda: 没有那个文件或目录</span><br></pre></td></tr></table></figure><p>参考原文：<a href="https://blog.csdn.net/jh0218/article/details/85097061">https://blog.csdn.net/jh0218/article/details/85097061</a></p><h3 id="导入redis模块"><a href="#导入redis模块" class="headerlink" title="导入redis模块"></a>导入redis模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install redis-py</span><br></pre></td></tr></table></figure><p><strong>更换镜像源</strong></p><p>找不到.condarc 文件，输入<code>conda info</code>可以看到文件位置，然后修改.condarc 文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: true</span><br><span class="line">channel_alias: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda</span><br><span class="line">default_channels:</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;main</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;r</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;pro</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  msys2: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  bioconda: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  menpo: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  pytorch: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  simpleitk: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br></pre></td></tr></table></figure><p>但是redis并没有被导入</p><p>在这块我大概折腾了一天半，来解决报的这个错然并没有卵用，继续报错，于是我把anaconda卸了重新安装了一个版本依旧</p><p>报错2020-4</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Collecting package metadata (current_repodata.json): failed</span><br><span class="line"></span><br><span class="line">CondaHTTPError: HTTP 000 CONNECTION FAILED for url &lt;https:&#x2F;&#x2F;repo.anaconda.com&#x2F;pkgs&#x2F;main&#x2F;linux-64&#x2F;current                                 _repodata.json&gt;</span><br><span class="line">Elapsed: -</span><br><span class="line"></span><br><span class="line">An HTTP error occurred when trying to retrieve this URL.</span><br><span class="line">HTTP errors are often intermittent, and a simple retry will get you on your way.</span><br><span class="line"></span><br><span class="line">If your current network has https:&#x2F;&#x2F;www.anaconda.com blocked, please file</span><br><span class="line">a support request with your network engineering team.</span><br><span class="line"></span><br><span class="line">&#39;https:&#x2F;&#x2F;repo.anaconda.com&#x2F;pkgs&#x2F;main&#x2F;linux-64&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>报错5.3.1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Solving environment: failed</span><br><span class="line"></span><br><span class="line">CondaHTTPError: HTTP 000 CONNECTION FAILED for url &lt;https:&#x2F;&#x2F;repo.anaconda.com&#x2F;pkgs&#x2F;main&#x2F;noarch&#x2F;repodata.json.bz2&gt;</span><br><span class="line">Elapsed: -</span><br><span class="line"></span><br><span class="line">An HTTP error occurred when trying to retrieve this URL.</span><br><span class="line">HTTP errors are often intermittent, and a simple retry will get you on your way.</span><br><span class="line"></span><br><span class="line">If your current network has https:&#x2F;&#x2F;www.anaconda.com blocked, please file</span><br><span class="line">a support request with your network engineering team.</span><br><span class="line"></span><br><span class="line">ConnectionError(MaxRetryError(&quot;HTTPSConnectionPool(host&#x3D;&#39;repo.anaconda.com&#39;, port&#x3D;443): Max retries exceeded with url: &#x2F;pkgs&#x2F;main&#x2F;noarch&#x2F;repodata.json.   bz2 (Caused by NewConnectionError(&#39;&lt;urllib3.connection.VerifiedHTTPSConnection object at 0x7fcf10f42cc0&gt;: Failed to establish a new connection: [Errno    -2] Name or service not known&#39;))&quot;))</span><br><span class="line"></span><br><span class="line">ConnectionError(MaxRetryError(&quot;HTTPSConnectionPool(host&#x3D;&#39;mirrors.tuna.tsinghua.edu.cn&#39;, port&#x3D;443): Max retries exceeded with url: &#x2F;anaconda&#x2F;pkgs&#x2F;msys2&#x2F;linux-64&#x2F;repodata.json (Caused by NewConnectionError(&#39;&lt;urllib3.connection.VerifiedHTTPSConnection object at 0x7fb1f18d43c8&gt;: Failed to establish a new connection: [Errno -2] Name or service not known&#39;))&quot;))</span><br><span class="line"></span><br><span class="line">ConnectionError(MaxRetryError(&quot;HTTPConnectionPool(host&#x3D;&#39;mirrors.tuna.tsinghua.edu.cn&#39;, port&#x3D;80): Max retries exceeded with url: &#x2F;anaconda&#x2F;pkgs&#x2F;msys2&#x2F;noarch&#x2F;repodata.json (Caused by NewConnectionError(&#39;&lt;urllib3.connection.HTTPConnection object at 0x7fa7b0536f98&gt;: Failed to establish a new connection: [Errno -2] Name or service not known&#39;))&quot;))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>查看配置信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --show</span><br></pre></td></tr></table></figure><p>原因可能是防火墙的问题（还是报上面的错）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --set ssl_verify false</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(base) [root@SANDBOX opt]# wget https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py</span><br><span class="line">--2020-09-11 14:54:13--  https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py</span><br><span class="line">正在解析主机 bootstrap.pypa.io (bootstrap.pypa.io)... 失败：未知的名称或服务。</span><br><span class="line">wget: 无法解析主机地址 “bootstrap.pypa.io”</span><br><span class="line"></span><br><span class="line">但是这个网址是可以打开的</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/u012848709/article/details/82989276">https://blog.csdn.net/u012848709/article/details/82989276</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(base) [root@SANDBOX etc]# vim resolv.conf</span><br></pre></td></tr></table></figure><p>添加（最后还是失败）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 8.8.4.4</span><br></pre></td></tr></table></figure><p>………………………………………………………………….（解决方案）</p><h3 id="pip-install-offline"><a href="#pip-install-offline" class="headerlink" title="pip install offline"></a>pip install offline</h3><p>在做了许多努力后我开始怀疑是不是服务器没有网，于是去问了一下我的小伙伴，emm以后要多和小伙伴沟通呀</p><p>然后师傅告诉我两句话，瞬间像溺水后获救了一样</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install offline</span><br><span class="line">你可以在自己的机器上离线下载，然后拷贝进去安装</span><br></pre></td></tr></table></figure><p>到网站  <a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a> 下载whl文件上传到服务器上</p><p>先检查一下有没有redis</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list</span><br></pre></td></tr></table></figure><p>然后进到whl文件所在文件夹下执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install redis-3.5.3-py3-none-any.whl</span><br></pre></td></tr></table></figure><p>然后好了……………………………………………………………………………………………………………………………………………….</p><p>知识在于积累呀！</p><h1 id="Centos的iso镜像搭建本地yum仓库"><a href="#Centos的iso镜像搭建本地yum仓库" class="headerlink" title="Centos的iso镜像搭建本地yum仓库"></a>Centos的iso镜像搭建本地yum仓库</h1><p>把准备好的iso文件拷到 /usr/local/src/下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp  -r root@160.0.3.9:&#x2F;usr&#x2F;local&#x2F;src &#x2F;usr&#x2F;local    #会把整个src目录拷到local下</span><br></pre></td></tr></table></figure><p><strong>挂载iso镜像</strong></p><p>①、新建挂载目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;mnt&#x2F;cdrom1</span><br></pre></td></tr></table></figure><p>②、直接编辑/etc/fstab文件，在后面添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 备份fstab文件</span><br><span class="line">cp fstab fstab.bak</span><br><span class="line"># 挂载iso</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;src&#x2F;CentOS-7-x86_64-DVD-1810.iso &#x2F;mnt&#x2F;cdrom1 iso9660 loop,defaults 0 0</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a         # 自动检测并激活挂载（未报错：mount: &#x2F;dev&#x2F;loop0 写保护，将以只读方式挂载）</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h             # 看结果</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">文件系统                 容量  已用  可用 已用% 挂载点</span><br><span class="line">devtmpfs                  16G     0   16G    0% &#x2F;dev</span><br><span class="line">tmpfs                     16G     0   16G    0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs                     16G  9.6M   16G    1% &#x2F;run</span><br><span class="line">tmpfs                     16G     0   16G    0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;centos-root 1007G   19G  988G    2% &#x2F;</span><br><span class="line">&#x2F;dev&#x2F;sda1               1014M  185M  830M   19% &#x2F;boot</span><br><span class="line">tmpfs                    3.2G   12K  3.2G    1% &#x2F;run&#x2F;user&#x2F;42</span><br><span class="line">tmpfs                    3.2G     0  3.2G    0% &#x2F;run&#x2F;user&#x2F;0</span><br><span class="line">&#x2F;dev&#x2F;loop0               4.3G  4.3G     0  100% &#x2F;mnt&#x2F;cdrom1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>配置并刷新yum仓库</strong></p><p>①、新增yum配置文件：</p><p>Ps：完全离线使用，新增之前建议先删除(移走)所有在线yum源：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv -f &#x2F;etc&#x2F;yum.repos.d&#x2F;*  &#x2F;home&#x2F;</span><br><span class="line">vim &#x2F;etc&#x2F;yum.repos.d&#x2F;local.repo</span><br></pre></td></tr></table></figure><p>粘贴以下内容，第3行表示iso挂载目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[local-yum]</span><br><span class="line">name&#x3D;Local Repository</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;mnt&#x2F;cdrom1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure><p>②、刷新查看yum是否生效：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum clean all &amp;&amp; yum list</span><br></pre></td></tr></table></figure><p>以上要是没要报错，那么本地yum仓库就搭建好了，就可以使用【 yum install 软件名】来安装所需软件，而不需要联网了。</p><p>参考原文：<a href="https://zhang.ge/4099.html">https://zhang.ge/4099.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;注意事项&quot;&gt;&lt;a href=&quot;#注意事项&quot; class=&quot;headerlink&quot; title=&quot;注意事项&quot;&gt;&lt;/a&gt;&lt;strong&gt;注意事项&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;实验过程中如果出现⼀些诸如客户端不能连通或访问等问题，可尝试考虑关闭防⽕墙：&lt;/p&gt;
&lt;f</summary>
      
    
    
    
    <category term="工具" scheme="https://xiaopantongxue816.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
  </entry>
  
  <entry>
    <title>远程连接工具</title>
    <link href="https://xiaopantongxue816.github.io/2020/09/01/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%85%B7/"/>
    <id>https://xiaopantongxue816.github.io/2020/09/01/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%85%B7/</id>
    <published>2020-09-01T01:49:52.000Z</published>
    <updated>2020-09-07T03:22:11.318Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SecureCRT"><a href="#SecureCRT" class="headerlink" title="SecureCRT"></a>SecureCRT</h1><h3 id="设置字体和编码"><a href="#设置字体和编码" class="headerlink" title="设置字体和编码"></a>设置字体和编码</h3><p>选项-&gt;会话选项-&gt;仿真-&gt;终端-&gt;Linux</p><p>选项-&gt;会话选项-&gt;外观-&gt;字体-&gt;新宋体、常规、12、中文GB2312</p><p>选项-&gt;会话选项-&gt;外观-&gt;字符编码-&gt;UTF-8</p><h1 id="WinSCP"><a href="#WinSCP" class="headerlink" title="WinSCP"></a>WinSCP</h1><p>传输文件</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;SecureCRT&quot;&gt;&lt;a href=&quot;#SecureCRT&quot; class=&quot;headerlink&quot; title=&quot;SecureCRT&quot;&gt;&lt;/a&gt;SecureCRT&lt;/h1&gt;&lt;h3 id=&quot;设置字体和编码&quot;&gt;&lt;a href=&quot;#设置字体和编码&quot; class=&quot;he</summary>
      
    
    
    
    <category term="工具" scheme="https://xiaopantongxue816.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
  </entry>
  
  <entry>
    <title>博客初步搭建完成的一些感想</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/28/%E5%8D%9A%E5%AE%A2%E5%88%9D%E6%AD%A5%E6%90%AD%E5%BB%BA%E5%AE%8C%E6%88%90%E7%9A%84%E4%B8%80%E4%BA%9B%E6%84%9F%E6%83%B3/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/28/%E5%8D%9A%E5%AE%A2%E5%88%9D%E6%AD%A5%E6%90%AD%E5%BB%BA%E5%AE%8C%E6%88%90%E7%9A%84%E4%B8%80%E4%BA%9B%E6%84%9F%E6%83%B3/</id>
    <published>2020-08-28T11:18:31.000Z</published>
    <updated>2020-09-08T04:43:14.323Z</updated>
    
    <content type="html"><![CDATA[<p>​    突然不知道该说啥，上周五在这里总结了好多话，周一来了上传到博客只有一个标题啥也没有，也不是停电断电突然关了电脑，怎么就没保存下来呢，笑哭…….</p><p>​    虽然很气但是也没有办法了，那就简简单单把我记着的细节在记录一下（其实我突然没了记录的心情，就像你写的日记，当时的那刻的记录突然格式化了，心态崩了）</p><p>​    就是换了大概四五个主题，从简易好看到好看到更简易好看到最简易最好到功能完善一目了然也就是这个3-hexo主题，学会了什么呢，就是没有一次做好的东西，要先搭建起来再一步一步完善成它最好的最合适的状态。</p><p>​    还是想哭┭┮﹏┭┮。</p><p>next ：<a href="https://www.jianshu.com/p/1f8107a8778c">https://www.jianshu.com/p/1f8107a8778c</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;​    突然不知道该说啥，上周五在这里总结了好多话，周一来了上传到博客只有一个标题啥也没有，也不是停电断电突然关了电脑，怎么就没保存下来呢，笑哭…….&lt;/p&gt;
&lt;p&gt;​    虽然很气但是也没有办法了，那就简简单单把我记着的细节在记录一下（其实我突然没了记录的心情，就像你</summary>
      
    
    
    
    <category term="其它" scheme="https://xiaopantongxue816.github.io/categories/%E5%85%B6%E5%AE%83/"/>
    
    
    <category term="日记" scheme="https://xiaopantongxue816.github.io/tags/%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>linux环境搭建</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/27/%E5%9F%BA%E4%BA%8E%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%B9%E5%BC%8F%E7%9A%84linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/27/%E5%9F%BA%E4%BA%8E%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%B9%E5%BC%8F%E7%9A%84linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</id>
    <published>2020-08-27T10:37:16.000Z</published>
    <updated>2020-09-11T07:45:17.151Z</updated>
    
    <content type="html"><![CDATA[<h1 id="主机和节点"><a href="#主机和节点" class="headerlink" title="主机和节点"></a>主机和节点</h1><h3 id="192-168-220-10（主机）"><a href="#192-168-220-10（主机）" class="headerlink" title="192.168.220.10（主机）"></a>192.168.220.10（主机）</h3><h3 id="192-168-220-11（克隆机）"><a href="#192-168-220-11（克隆机）" class="headerlink" title="192.168.220.11（克隆机）"></a>192.168.220.11（克隆机）</h3><h3 id="192-168-220-12（节点机）"><a href="#192-168-220-12（节点机）" class="headerlink" title="192.168.220.12（节点机）"></a>192.168.220.12（节点机）</h3><p>redis /anaconda</p><h1 id="基于虚拟机方式的linux环境搭建"><a href="#基于虚拟机方式的linux环境搭建" class="headerlink" title="基于虚拟机方式的linux环境搭建"></a>基于虚拟机方式的linux环境搭建</h1><p>Linux—&gt;ifconfig</p><p>windows—&gt;ipconfig</p><p>Centos下载地址：<a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/">http://mirrors.aliyun.com/centos/7/isos/x86_64/</a> </p><h3 id="网络IP的设置（重要）"><a href="#网络IP的设置（重要）" class="headerlink" title="网络IP的设置（重要）"></a><strong>网络IP的设置（重要）</strong></h3><p>对于多个节点的Linux环境，需要保证节点和宿主机之间互通，节点与外网互通以及节点之间的互通</p><h5 id="配置虚拟网络编辑器（net模式）"><a href="#配置虚拟网络编辑器（net模式）" class="headerlink" title="配置虚拟网络编辑器（net模式）"></a>配置虚拟网络编辑器（net模式）</h5><ol><li>编辑-&gt;虚拟网络编辑器</li><li>VMnet8(NET模式)-&gt;设置子网IP（192.168.220.0/192.168.x.0）和子网掩码（255.255.255.0）</li><li>选中NET模式并点击NET设置（网关ip：192.168.220.2）</li><li>DNS设置(去掉自动检测可用的DNS服务器的勾，在首选和备选DNS服务器中配置和真机相同的DNS服务器)</li><li>确定回到虚拟网络编辑器（选中将主机虚拟适配器连接到此网络和使用本地DHCP服务将ip地址分配给虚拟机）</li><li>点击DHCP设置（配置起始ip地址：192.168.220.128和结束ip地址：192.168.220.254（主要用于分配IP的分配区间 ））</li><li>确定即可</li></ol><h5 id="配置主机"><a href="#配置主机" class="headerlink" title="配置主机"></a>配置主机</h5><ol><li>打开网络与共享中心-&gt;更改适配器设置-&gt;选中VMnet8右击属性</li><li>双击IPVC4（配置IP地址192.168.220.1/192.168.x.1）和子网掩码（255.255.255.0），DNS服务器？？？）</li><li>确定即可</li></ol><h5 id="配置虚拟机"><a href="#配置虚拟机" class="headerlink" title="配置虚拟机"></a>配置虚拟机</h5><p>选中虚拟机右击-&gt;设置（选择网络适配器-&gt;NET模式）-&gt;确定即可</p><h5 id="为虚拟机设置静态ip"><a href="#为虚拟机设置静态ip" class="headerlink" title="为虚拟机设置静态ip"></a>为虚拟机设置静态ip</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F; #到根目录</span><br><span class="line"># 找到网络配置文件ifcfg-ensXXX 配置虚拟机网卡，文件名可能会有点不一样，可以进去到network-scripts文件夹查看</span><br><span class="line">vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33  </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 修改或添加一下命令行</span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">#PROXY_METHOD&#x3D;none</span><br><span class="line">#BROWSER_ONLY&#x3D;no</span><br><span class="line">#BOOTPROTO&#x3D;dhcp</span><br><span class="line">#DEFROUTE&#x3D;yes</span><br><span class="line">#IPV4_FAILURE_FATAL&#x3D;no</span><br><span class="line">#IPV6INIT&#x3D;yes</span><br><span class="line">#IPV6_AUTOCONF&#x3D;yes</span><br><span class="line">#IPV6_DEFROUTE&#x3D;yes</span><br><span class="line">#IPV6_FAILURE_FATAL&#x3D;no</span><br><span class="line">#IPV6_ADDR_GEN_MODE&#x3D;stable-privacy</span><br><span class="line">BOOTPROTO&#x3D;static</span><br><span class="line">IPADDR&#x3D;192.168.220.10</span><br><span class="line">NETMASK&#x3D;255.255.255.0</span><br><span class="line">GATEWAY&#x3D;192.168.220.2</span><br><span class="line">DNS1&#x3D;211.136.150.66</span><br><span class="line">DNS2&#x3D;211.136.112.50</span><br><span class="line">NAME&#x3D;ens33</span><br><span class="line">UUID&#x3D;1db01eda-dfeb-4574-ea6d-a9f1b29af25f</span><br><span class="line">DEVICE&#x3D;ens33</span><br><span class="line">ONBOOT&#x3D;yes</span><br><span class="line">~</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 设置完后重启生效即可 </span><br><span class="line">[pjy@localhost ~]service network restart</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 测试</span><br><span class="line">[pjy@localhost ~]ping www.baidu.com</span><br></pre></td></tr></table></figure><p>参考原文：</p><p>虚拟机与本地主机不能互ping： <a href="https://www.cnblogs.com/wangkun122/articles/12083396.html">https://www.cnblogs.com/wangkun122/articles/12083396.html</a> </p><p>Vmware虚拟机网络配置(固定IP) ：<a href="https://www.jianshu.com/p/6fdbba039d79">https://www.jianshu.com/p/6fdbba039d79</a></p><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><h5 id="克隆后新旧机子的网卡都失效了"><a href="#克隆后新旧机子的网卡都失效了" class="headerlink" title="克隆后新旧机子的网卡都失效了"></a>克隆后新旧机子的网卡都失效了</h5><p>修改虚拟机静态ip</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33  </span><br><span class="line">IPADDR&#x3D;192.168.220.x</span><br></pre></td></tr></table></figure><p>测试ifconfig失效，关闭网卡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop NetworkManager</span><br><span class="line">systemctl disable NetworkManager</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>重启网卡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><p>再次测试：ifconfig，就有了</p><p>参考原文：<a href="https://blog.csdn.net/qlj324513/article/details/80291548">https://blog.csdn.net/qlj324513/article/details/80291548</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;主机和节点&quot;&gt;&lt;a href=&quot;#主机和节点&quot; class=&quot;headerlink&quot; title=&quot;主机和节点&quot;&gt;&lt;/a&gt;主机和节点&lt;/h1&gt;&lt;h3 id=&quot;192-168-220-10（主机）&quot;&gt;&lt;a href=&quot;#192-168-220-10（主机）&quot; cla</summary>
      
    
    
    
    <category term="运维" scheme="https://xiaopantongxue816.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
  </entry>
  
  <entry>
    <title>Redis</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/24/Redis/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/24/Redis/</id>
    <published>2020-08-24T01:25:49.000Z</published>
    <updated>2020-09-09T10:18:07.464Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C-连接redis数据库"><a href="#C-连接redis数据库" class="headerlink" title="C# 连接redis数据库"></a>C# 连接redis数据库</h1><p><strong><em>虽然最后没有用到这个方法，但是他告诉我查看源码是多么的重要</em></strong></p><p> 在项目类库引用上右键NuGet 搜索redis 安装以下二个框架 ：</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span>     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"> <span class="number">2</span>     <span class="comment"><span class="doctag">///</span> 缓存客户端管理器工厂</span></span><br><span class="line"> <span class="number">3</span>     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"> <span class="number">4</span>     <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PoolManagerFactory</span></span><br><span class="line"> 5     &#123;</span><br><span class="line"> <span class="number">6</span>         <span class="keyword">private</span> <span class="keyword">static</span> PooledRedisClientManager Manager = <span class="literal">null</span>;</span><br><span class="line"> <span class="number">7</span>         <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PooledRedisClientManager <span class="title">CreateManager</span>(<span class="params"><span class="keyword">string</span>[] readWriteHosts, <span class="keyword">string</span>[] readOnlyHosts, <span class="keyword">int</span> initialDB = <span class="number">0</span></span>)</span></span><br><span class="line"><span class="function"> 8</span>         &#123;</span><br><span class="line"> <span class="number">9</span>             <span class="keyword">if</span> (Manager == <span class="literal">null</span>)</span><br><span class="line"><span class="number">10</span>             &#123;</span><br><span class="line"><span class="number">11</span>                 Manager = <span class="keyword">new</span> PooledRedisClientManager(readWriteHosts, readOnlyHosts, <span class="keyword">new</span> RedisClientManagerConfig()</span><br><span class="line"><span class="number">12</span>                 &#123;</span><br><span class="line"><span class="number">13</span>                     MaxWritePoolSize = <span class="number">5</span>,</span><br><span class="line"><span class="number">14</span>                     MaxReadPoolSize = <span class="number">5</span>,</span><br><span class="line"><span class="number">15</span>                     AutoStart = <span class="literal">true</span></span><br><span class="line"><span class="number">16</span>                 &#125;, initialDB, <span class="number">50</span>, <span class="number">5</span>);</span><br><span class="line"><span class="number">17</span>             &#125;</span><br><span class="line"><span class="number">18</span>             <span class="keyword">return</span> Manager;</span><br><span class="line"><span class="number">19</span>         &#125;</span><br><span class="line"><span class="number">20</span> </span><br><span class="line"><span class="number">21</span>     &#125;</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span>      <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"> <span class="number">2</span>         <span class="comment"><span class="doctag">///</span> IP地址中可以加入auth验证   password@ip:port</span></span><br><span class="line"> <span class="number">3</span>         <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"> <span class="number">4</span>         <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;hosts&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"> <span class="number">5</span>         <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"> <span class="number">6</span>         <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;RedisEndpoint&gt; <span class="title">ToRedisEndPoints</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;<span class="keyword">string</span>&gt; hosts</span>)</span></span><br><span class="line"><span class="function"> 7</span>         &#123;</span><br><span class="line"> <span class="number">8</span>             <span class="keyword">if</span> (hosts == <span class="literal">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> List&lt;RedisEndpoint&gt;();</span><br><span class="line"> <span class="number">9</span>             <span class="comment">//redis终结点的列表</span></span><br><span class="line"><span class="number">10</span>             <span class="keyword">var</span> redisEndpoints = <span class="keyword">new</span> List&lt;RedisEndpoint&gt;();</span><br><span class="line"><span class="number">11</span>             <span class="keyword">foreach</span> (<span class="keyword">var</span> host <span class="keyword">in</span> hosts)</span><br><span class="line"><span class="number">12</span>             &#123;</span><br><span class="line"><span class="number">13</span>                 RedisEndpoint endpoint;</span><br><span class="line"><span class="number">14</span>                 <span class="keyword">string</span>[] hostParts;</span><br><span class="line"><span class="number">15</span>                 <span class="keyword">if</span> (host.Contains(<span class="string">&quot;@&quot;</span>))</span><br><span class="line"><span class="number">16</span>                 &#123;</span><br><span class="line"><span class="number">17</span>                     hostParts = host.SplitOnLast(<span class="string">&#x27;@&#x27;</span>);</span><br><span class="line"><span class="number">18</span>                     <span class="keyword">var</span> password = hostParts[<span class="number">0</span>];</span><br><span class="line"><span class="number">19</span>                     hostParts = hostParts[<span class="number">1</span>].Split(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line"><span class="number">20</span>                     endpoint = GetRedisEndPoint(hostParts);</span><br><span class="line"><span class="number">21</span>                     endpoint.Password = password;</span><br><span class="line"><span class="number">22</span>                 &#125;</span><br><span class="line"><span class="number">23</span>                 <span class="keyword">else</span></span><br><span class="line"><span class="number">24</span>                 &#123;</span><br><span class="line"><span class="number">25</span>                     hostParts = host.Split(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line"><span class="number">26</span>                     endpoint = GetRedisEndPoint(hostParts);</span><br><span class="line"><span class="number">27</span>                 &#125;</span><br><span class="line"><span class="number">28</span>                 redisEndpoints.Add(endpoint);</span><br><span class="line"><span class="number">29</span>             &#125;</span><br><span class="line"><span class="number">30</span>             <span class="keyword">return</span> redisEndpoints;</span><br><span class="line"><span class="number">31</span>         &#125;[![复制代码](https:<span class="comment">//common.cnblogs.com/images/copycode.gif)](javascript:void(0);</span></span><br></pre></td></tr></table></figure><p>在ip:port前面加上@用来表示密码，比如password@ip:port    ，现在才知道能看到源码的程序是多么的幸福的一件事。<strong>开源伟大</strong>。</p><p><a href="https://www.cnblogs.com/jiagoushi/p/4024530.html">serviceStack.Redis 在PooledRedisClientManager 中设置密码</a>—参考原文</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;C-连接redis数据库&quot;&gt;&lt;a href=&quot;#C-连接redis数据库&quot; class=&quot;headerlink&quot; title=&quot;C# 连接redis数据库&quot;&gt;&lt;/a&gt;C# 连接redis数据库&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;虽然最后没有用到这个方法，但是他</summary>
      
    
    
    
    <category term="数据库" scheme="https://xiaopantongxue816.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
  </entry>
  
  <entry>
    <title>开源网站相关</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/21/%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%9B%B8%E5%85%B3/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/21/%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%9B%B8%E5%85%B3/</id>
    <published>2020-08-21T06:34:04.000Z</published>
    <updated>2020-09-07T02:40:07.941Z</updated>
    
    <content type="html"><![CDATA[<h1 id="项目网址"><a href="#项目网址" class="headerlink" title="项目网址"></a>项目网址</h1><h3 id="gitee项目网址（CodeSheep-推荐）"><a href="#gitee项目网址（CodeSheep-推荐）" class="headerlink" title="gitee项目网址（CodeSheep 推荐）"></a>gitee项目网址（CodeSheep 推荐）</h3><ul><li>后台管理类项目<ol><li>gitee.com/thinkgem/jeesite （pom文件一直爆红）</li></ol></li><li>商城类项目</li><li>秒杀类项目（高并发）</li><li>支付类项目</li><li>综合平台类项目（主要是指分布式和微服务相关的脚手架项目）</li></ul><h1 id="github出现的问题"><a href="#github出现的问题" class="headerlink" title="github出现的问题"></a>github出现的问题</h1><h3 id="关于github访问速度慢"><a href="#关于github访问速度慢" class="headerlink" title="关于github访问速度慢"></a>关于github访问速度慢</h3><p><strong>1. 修改本地hosts文件</strong></p><pre><code>windows系统的hosts文件的位置如下：C:\Windows\System32\drivers\etc\hostsmac/linux系统的hosts文件的位置如下：/etc/hosts</code></pre><p><strong>2. 在hosts文件中增加<a href="http://github.global.ssl.fastly.net和http//github.com%E7%9A%84%E6%98%A0%E5%B0%84">http://github.global.ssl.fastly.net和http://github.com的映射</a></strong></p><pre><code>获取Github相关网站的ip访问https://www.ipaddress.com分别输入github.global.ssl.fastly.net和github.com，查询ip地址下面是我的配置199.232.69.194        github.global.ssl.fastly.net140.82.113.3        GitHub.com</code></pre><p>ping   github.com  确实是可以收到回复了，但是网站访问也好像还是很慢的样子</p><p>参考：<a href="https://zhuanlan.zhihu.com/p/93436925">https://zhuanlan.zhihu.com/p/93436925</a> </p><h3 id="hexo向github-deploy时出现错误"><a href="#hexo向github-deploy时出现错误" class="headerlink" title="hexo向github deploy时出现错误"></a>hexo向github deploy时出现错误</h3><p>error: RPC failed; curl 56 OpenSSL SSL_read: Connection was reset, errno 10054</p><p>终端输入：<br>$ git config http.sslVerify “false”<br>报错信息：<br>fatal: not in a git directory<br>执行下列命令解决：<br>$ git config –global http.sslVerify “false”</p><p>（git缓存的大小为100MB ）</p><p>git config http.postBuffer 524288000  </p><p>最后：没有用！还是报错</p><p>可能不是我的问题是github被墙了。。。过段时间或者第二天就可以了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;项目网址&quot;&gt;&lt;a href=&quot;#项目网址&quot; class=&quot;headerlink&quot; title=&quot;项目网址&quot;&gt;&lt;/a&gt;项目网址&lt;/h1&gt;&lt;h3 id=&quot;gitee项目网址（CodeSheep-推荐）&quot;&gt;&lt;a href=&quot;#gitee项目网址（CodeSheep-推荐</summary>
      
    
    
    
    <category term="工具" scheme="https://xiaopantongxue816.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="学习网站" scheme="https://xiaopantongxue816.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99/"/>
    
  </entry>
  
  <entry>
    <title>Linux命令记录</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/21/Linux%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/21/Linux%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/</id>
    <published>2020-08-21T01:34:19.000Z</published>
    <updated>2020-09-11T06:56:51.643Z</updated>
    
    <content type="html"><![CDATA[<h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 软件安装目录</span><br><span class="line">&#x2F;usr&#x2F;local</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p>Linux命令大全(手册)：<a href="https://www.linuxcool.com/">https://www.linuxcool.com/</a> </p><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 新建目录</span><br><span class="line">mkdir 目录名</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 无法创建目录&quot;xxxx&quot;: 权限不够</span><br><span class="line">root用户登录或者chmod</span><br><span class="line">chmod +x .&#x2F;*         &#x2F;&#x2F;为当前文件夹下所有文件赋予可执行权限</span><br><span class="line">chmod 777 install </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 删除空目录</span><br><span class="line">rmdir 目录名</span><br></pre></td></tr></table></figure><p>递归地删除目录，使用递归选项-r或-R，如果目录是受写保护的，则会提示是否继续删除目录和目录中的文件作为一个整体。（慎重）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除非空目录</span><br><span class="line">rm -rf 目录名&#x2F;      &#x2F;&#x2F;-f 强制删除而不被提示</span><br><span class="line"># 单个命令中删除多个目录，如下面的命令所示。命令删除所有目录和它们的子目录，而不提示删除 </span><br><span class="line">rm -rf dir1 dir2 dir3</span><br></pre></td></tr></table></figure><h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 查看所有进程</span><br><span class="line">ps -ef</span><br><span class="line">    -e：显示系统内所有进程的信息。与 -A 选项功能相同</span><br><span class="line">    -f：使用完整 (full) 的格式显示进程信息，如果只有 ps -e 则输出进程信息的格式和只使用 ps 一样</span><br><span class="line"># 根据特定情况过滤</span><br><span class="line">ps -ef | grep mmp-front  &#x2F;&#x2F;mmp-front是进程关键字 grep 是搜索</span><br><span class="line">ps -aux | grep java      &#x2F;&#x2F;-aux 显示所有状态</span><br><span class="line"></span><br><span class="line">kill -9 [PID]            &#x2F;&#x2F;-9 表示强迫进程立即停止</span><br></pre></td></tr></table></figure><h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CentOS7 的防火墙配置</span><br><span class="line"># 查看防火墙状态</span><br><span class="line">systemctl status firewalld</span><br><span class="line"># 关闭防火墙：</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"># 开启防火墙：</span><br><span class="line">systemctl start firewalld.service</span><br><span class="line"># 关闭开机启动：</span><br><span class="line">systemctl disable firewalld.service</span><br><span class="line"># 开启开机启动：</span><br><span class="line">systemctl enable firewalld.service</span><br></pre></td></tr></table></figure><h3 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a><strong>安装软件</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 解压安装包</span><br><span class="line">tar -zxvf xxx.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 编辑配置文件</span><br><span class="line">vim &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 添加环境变量（profile）尾部加⼊ xx 的 bin 路径配置</span><br><span class="line">export xx_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;xx</span><br><span class="line">export PATH&#x3D;$PATH:$xx_HOME&#x2F;bin</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使环境变量⽣效</span><br><span class="line">source &#x2F;etc&#x2F;profile </span><br></pre></td></tr></table></figure><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><p>linux下进入python命令行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python</span><br></pre></td></tr></table></figure><p>退出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quit()</span><br></pre></td></tr></table></figure><p>#工作过程用到命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">pwd            #当前所在文件路径</span><br><span class="line">&#x2F;save        #搜索save关键字</span><br><span class="line">：e           #刷新</span><br><span class="line">shift+G        #到最后一行</span><br><span class="line">4yy            #复制4行</span><br><span class="line">p            #粘贴</span><br><span class="line">mv &#x2F;etc&#x2F;snmp&#x2F;snmpd.conf &#x2F;etc&#x2F;snmp&#x2F;snmpd.conf.bak    #移动文件</span><br><span class="line">scp  -r root@160.0.3.9:&#x2F;usr&#x2F;local&#x2F;src &#x2F;usr&#x2F;local    #拷贝目录从远程到本地&#x2F;usr&#x2F;local&#x2F;src目录下</span><br><span class="line">sudo netstat -ntpl                                  #使用netstat查看本地端口的使用情况</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 为当前文件夹下所有文件赋予可执行权限，文件有可执行权限后是绿色的</span><br><span class="line">chmod +x .&#x2F;*   </span><br><span class="line"></span><br><span class="line"># 用ldd命令可以看该程序需要的库的信息，把缺省的拷贝过去</span><br><span class="line">ldd SystemInfoCollector（执行文件）</span><br><span class="line"></span><br><span class="line">#将20241目录下的所有文件复制到20242文件夹中</span><br><span class="line">cp PDAHandle_20241&#x2F;* PDAHandler_20242&#x2F;        </span><br><span class="line"></span><br><span class="line"># 拷贝文件从160.0.3.5到服务器160.0.3.9</span><br><span class="line">scp libhiredis.so root@160.0.3.9:&#x2F;lib64     #拷贝文件</span><br><span class="line">scp -r &#x2F;home&#x2F;space&#x2F;music&#x2F; root@www.runoob.com:&#x2F;home&#x2F;root&#x2F;others&#x2F;     #拷贝目录</span><br><span class="line"></span><br><span class="line">在增加新的节点时需要修改三个文件：main.cpp&#x2F;makefile&#x2F;install</span><br><span class="line">cd到指定文件夹下（例如PDAHandler_20242）</span><br><span class="line">mm        #编译</span><br><span class="line">.&#x2F;install        #发布（输入密码）</span><br><span class="line">如果提交失败，尚未纳入版本控制，cd..退回上一级执行命令</span><br><span class="line">[xxx@VM_DEV HFD]$   svn  add  PDAHandler_20242</span><br><span class="line">[xxx@VM_DEV test]$ chmod 777 install  （如果install权限不够）</span><br><span class="line"></span><br><span class="line">Putty小技巧：将复制的数据粘贴到putty中时，会出现无格式现象，调整方法为：选中数据，到虚拟机中后右键粘贴，shift+v ，gg  ,  &#x3D;  ，格式化后对齐</span><br><span class="line">或者</span><br><span class="line">在vim中：</span><br><span class="line">：set paste</span><br><span class="line">：set mouse&#x3D;v</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;目录结构&quot;&gt;&lt;a href=&quot;#目录结构&quot; class=&quot;headerlink&quot; title=&quot;目录结构&quot;&gt;&lt;/a&gt;目录结构&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr</summary>
      
    
    
    
    <category term="运维" scheme="https://xiaopantongxue816.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
  </entry>
  
  <entry>
    <title>IDEA</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/19/IDEA/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/19/IDEA/</id>
    <published>2020-08-19T02:26:28.000Z</published>
    <updated>2020-09-07T03:21:01.196Z</updated>
    
    <content type="html"><![CDATA[<p>搞不好什么时候就要重装电脑，所以就来记录一下好了</p><h1 id="JDK环境变量配置"><a href="#JDK环境变量配置" class="headerlink" title="JDK环境变量配置"></a>JDK环境变量配置</h1><p><strong>一个小知识点</strong>（<em>JDK卸载的时候有两个程序需要卸载</em>）</p><p>①java 8 update 171（64-bit）；②java SE Development Kit8 update 171（64-bit） </p><pre><code>4#在用户变量新建变量JAVA_HOME值D:\Program Files\Java\jdk1.8.0_181（jdk安装目录）5#在系统变量    1.新建变量JAVA_HOME值&quot;D:\Program Files\Java\jdk1.8.0_181&quot;(没有这一步最后在cmd运行javac会出错)    2.新建变量CLASSPATH值&quot;.;%Java_Home%\bin;%Java_Home%\lib\dt.jar;%Java_Home%\lib\tools.jar&quot;    3.选中”Path“点击”编辑“选项,新建%Java_Home%\bin和%Java_Home%\jre\bin（如果出现变量值在前面添加“%Java_Home%\bin;%Java_Home%\jre\bin;”）6#一路确定重新cmd，输入java/javac/java -version三个命令进行验证</code></pre><h1 id="IDEA安装破解配置（2017版本）"><a href="#IDEA安装破解配置（2017版本）" class="headerlink" title="IDEA安装破解配置（2017版本）"></a>IDEA安装破解配置（2017版本）</h1><p>安装到最后一步不要running，先把激活文件拷到文件夹下（D:\Program Files\JetBrains\IntelliJ IDEA 2017.3.2\lib）</p><p>然后找到安装目录下的bin目录（D:\Program Files\JetBrains\IntelliJ IDEA 2017.3.2\bin）修改idea.exe.vmoptions、idea64.exe.vmoptions两个文件</p><p>在最后一行空一行加上<br>“”-javaagent:D:/Program Files/JetBrains/IntelliJ IDEA 2017.3.2/lib/JetbrainsCrack-3.1-release-enc .jar”<br>然后在打开IDEA选择Activation code并粘贴激活码</p><p>——-如果idea打不开就到c盘下（C:\Users\Administrator.IntelliJIdea2017.3\config）修改idea64.exe.vmoptions文件</p><pre><code>ThisCrackLicenseId-&amp;#123;&quot;licenseId&quot;:&quot;ThisCrackLicenseId&quot;,&quot;licenseeName&quot;:&quot;你的名字&quot;,&quot;assigneeName&quot;:&quot;&quot;,&quot;assigneeEmail&quot;:&quot;你的邮箱&quot;,&quot;licenseRestriction&quot;:&quot;For This Crack, Only Test! Please support genuine!!!&quot;,&quot;checkConcurrentUse&quot;:false,&quot;products&quot;:[&amp;#123;&quot;code&quot;:&quot;II&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;DM&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;AC&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;RS0&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;WS&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;DPN&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;RC&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;PS&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;DC&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;RM&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;CL&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;,&amp;#123;&quot;code&quot;:&quot;PC&quot;,&quot;paidUpTo&quot;:&quot;2099-12-31&quot;&amp;#125;],&quot;hash&quot;:&quot;2911276/0&quot;,&quot;gracePeriodDays&quot;:7,&quot;autoProlongated&quot;:false&amp;#125;</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;搞不好什么时候就要重装电脑，所以就来记录一下好了&lt;/p&gt;
&lt;h1 id=&quot;JDK环境变量配置&quot;&gt;&lt;a href=&quot;#JDK环境变量配置&quot; class=&quot;headerlink&quot; title=&quot;JDK环境变量配置&quot;&gt;&lt;/a&gt;JDK环境变量配置&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;一个</summary>
      
    
    
    
    <category term="工具" scheme="https://xiaopantongxue816.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
  </entry>
  
  <entry>
    <title>博客记录</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/16/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E8%AE%B0%E5%BD%95/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/16/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E8%AE%B0%E5%BD%95/</id>
    <published>2020-08-16T02:12:34.000Z</published>
    <updated>2020-09-07T03:22:04.342Z</updated>
    
    <content type="html"><![CDATA[<p>欢迎━(<em>｀∀´</em>)ノ亻!光临呐！</p><h1 id="下载安装node-js-cnpm-hexo"><a href="#下载安装node-js-cnpm-hexo" class="headerlink" title="下载安装node.js+cnpm+hexo"></a>下载安装node.js+cnpm+hexo</h1><p>环境：W10</p><p>官网：<a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a> （下载了LTS版本）</p><p>Win+R输入cmd打开命令提示符依次输入</p><pre><code>node -v #查看node版本 </code></pre><pre><code>npm -v  #查看npm版本  </code></pre><pre><code class="命令提示符">npm install -g cnpm --registry=http://registry.npm.taobao.org #安装淘宝的cnpm 管理器cnpm -v #查看cnpm版本 cnpm install -g hexo-cli #安装hexo框架hexo -v #查看hexo版本 mkdir XiaoPanTongXue #创建XiaoPanTongXue目录cd XiaoPanTongXue #进入XiaoPanTongXue目录sudo hexo init #生成博客 初始化博客hexo s  #启动本地博客服务http://localhost:4000/ #本地访问地址hexo n &quot;我的博客生成记录&quot; #创建新的文章</code></pre><h1 id="发布到GitHub"><a href="#发布到GitHub" class="headerlink" title="发布到GitHub"></a>发布到GitHub</h1><p><strong><em>如果用gitee的话要在对应仓库开启 Gitee Pages 服务</em></strong></p><p>在github注册自己的账号记住自己的邮箱账号和密码，因为各种网站各种账号密码，我记忆已经混乱，都记录在自己手机的记事本上。（主要是一些密码要求的格式比较复杂，还要大小写特殊字符什么的就容易忘）</p><p>下载安装git：<a href="https://git-scm.com/downloads/">https://git-scm.com/downloads/</a> </p><p>一路默认，安装完成后，打开文件夹C:\Users\Administrator.ssh（Administrator是当前用户名），在空白处点鼠标右键选择“Git Bush Here” ，打开gitbush。</p><p>配置用户名和邮箱：</p><pre><code class="ssh">git config --global user.name “用户名”git config --global user.email “邮箱”执行生成公钥和私钥的命令：ssh-keygen -t rsa #按照提示回车3下（会在.ssh文件夹里面生成一个私钥 id_rsa和一个公钥id_rsa.pub。）# 执行查看公钥的命令：# cat ~/.ssh/id_rsa.pub  </code></pre><p>到github上去添加公钥</p><p>起一个公钥title把id_rsa.pub文件里的公钥复制到key里Add SSH key</p><p>*加公钥就不需要每一次在博客hexo deploy的时候输入github的账号密码了，也防止了没有秘钥的人deploy，安全一点</p><p>注意创建仓库时仓库名称</p><p><strong>xiaopantongxue816</strong>.github.io 黑体部分要和github用户名一致，不然访问不到</p><pre><code># 在XiaoPanTongXue目录下安装git部署插件cnpm install --save hexo-deployer-git</code></pre><p>配置_config.yml （在XiaoPanTongXue目录下）</p><pre><code># Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: https://github.com/xiaopantongxue816/xiaopantongxue816.github.io/（注意和仓库地址不一致） branch: master</code></pre><p>注意每一个属性冒号后面都有一个空格 </p><p>第二级属性换行后也有空格</p><pre><code>#部署到Github仓库里hexo c #清理一下hexo g #生成hexo d #部署到远程Github仓库#访问这个地址可以查看博客https://YourGithubName.github.io/ #下载yilia主题到本地官网主题地址：https://hexo.io/themes/git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia #修改hexo根目录下的 _config.yml 文件 ： theme: yiliahexo c #清理一下hexo g #生成hexo d #部署到远程Github仓库https://YourGithubName.github.io/ #查看博客这里有一个很坑的问题，因为用谷歌浏览器缓冲功能太强大导致我怎么刷新页面都不更新，如果hexo d之后页面没有更新就shift+ctrl+delete清除缓冲就会更新页面了。</code></pre><p> 码云地址： <a href="http://panjiayuan.gitee.io/panjiayuan.gitee.io/">http://panjiayuan.gitee.io/panjiayuan.gitee.io/</a>     我放弃gitee了怎么都是部署失败页面效果出不来o(╥﹏╥)o</p><h1 id="主题更新"><a href="#主题更新" class="headerlink" title="主题更新"></a>主题更新</h1><pre><code>cd themes/3-hexogit pull</code></pre><h1 id="每一篇记录的基本格式"><a href="#每一篇记录的基本格式" class="headerlink" title="每一篇记录的基本格式"></a>每一篇记录的基本格式</h1><pre><code>tags:- 标签（细分）categories:- 分类（粗分，目前有以下7种，填两个就是二级标签）    - 前端    - 后端    - 数据库    - 运维    - 工具    - 生活    - 其它例如：- 后端- JAVA就是后端-&gt;JAVA</code></pre><p>标题1（#h1）</p><p>​    标题3（#h3）</p><p>​        标题5（#h5）</p><p>​        标题5（#h5）</p><p>​    标题3（#h3）</p><p>​    标题3（#h3）</p><p>……</p><p>参考：————–</p><p>*尽量就不用图片了</p><h1 id="Hexo使用攻略"><a href="#Hexo使用攻略" class="headerlink" title="Hexo使用攻略"></a>Hexo使用攻略</h1><h3 id="添加分类及标签"><a href="#添加分类及标签" class="headerlink" title="添加分类及标签"></a>添加分类及标签</h3><p>在博客文件夹下命令行执行</p><pre><code>hexo new page categories</code></pre><p>成功提示</p><pre><code>INFO  Created: e：/XiaoPanTongXue/source/categories/index.md</code></pre><p>根据目录找到index.md文件打开默认是：</p><pre><code>title: categoriesdate: 2020-08-28 13:02:09</code></pre><p>在后面加上一行</p><pre><code>type: &quot;categories&quot; </code></pre><p>保存关闭。</p><p>打开需要分类的文章添加categories属性，例如</p><pre><code>title: 博客记录date: 2020-08-16 10:12:34categories:- 其它- hexo</code></pre><p>其它是一级分类，hexo为二级分类，依次递减。</p><p>添加标签的步骤类似</p><pre><code>hexo new page tags</code></pre><p>………………..</p><p>在博客文件夹更目录下scaffolds/post.md文件中可以修改初始化文件样式（添加后两行）</p><pre><code>title: &amp;#123;&amp;#123; title &amp;#125;&amp;#125;date: &amp;#123;&amp;#123; date &amp;#125;&amp;#125;tags:categories:</code></pre><p>参考：<a href="https://www.jianshu.com/p/e17711e44e00">https://www.jianshu.com/p/e17711e44e00</a> </p><h3 id="图片显示方法"><a href="#图片显示方法" class="headerlink" title="图片显示方法"></a>图片显示方法</h3><p>测试图片存放目录</p><p>1.相对路径</p><p><img src="%E6%B5%8B%E8%AF%95%E5%9B%BE%E7%89%87/cat.png"></p><p> 2.HTML语法 </p><p><img src="img/pic/ceshi.jpg%20" width="200" height="200"/>`</p><p>3.云存储</p><p>4.标签插件语法</p><p><strong>第一种：相对路径</strong></p><ol><li>在博客根目录下修改_config.yml文件中的 post_asset_folder: true</li><li>hexo n ‘测试图片’生成新的md文件时在_post文件夹下会生成测试图片文件夹</li><li>把要插入的图片放到该同名文件夹下，图片名字（测试图片/cat.png）</li></ol><p><strong>第二种：HTML语法</strong></p><ol><li><p>在md文件中直接在需要放图片的地方插入html语句</p></li><li><p>图片放在_post文件夹下新建目录img即可，我又在img中建了一个子目录pic</p></li><li><pre><code class="html">&lt;img src=&quot;/img/pic/ceshi.jpg &quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;</code></pre></li></ol><p><strong>第三种：云存储</strong></p><p>七牛云，阿里云都可以</p><p><strong>第四种</strong>：标签插件语法</p><p>我还没看懂那个语法是咋回事</p><p>参考：<a href="https://blog.csdn.net/sinat_35026778/article/details/89789547?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.channel_param">https://blog.csdn.net/sinat_35026778/article/details/89789547?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.channel_param</a> </p><h1 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h1><p>1.修改配置文件导致</p><pre><code>E:\XiaoPanTongXue\themes\3-hexo&gt;hexo gINFO  Validating configINFO  Start processingINFO  Files loaded in 289 msERROR TypeError: E:\XiaoPanTongXue\themes\3-hexo\layout\post.ejs:28    26| &lt;div id=&quot;post&quot;&gt;    27|     &lt;div class=&quot;pjax&quot;&gt; &gt;&gt; 28|         &lt;%- partial(&#39;_partial/article&#39;, &amp;#123;post: page, index: false&amp;#125;) %&gt;    29|     &lt;/div&gt;    30|     &lt;div class=&quot;copyright&quot;&gt;    31|         &lt;%- fragment_cache(&#39;copyright&#39;, function()&amp;#123;E:\XiaoPanTongXue\themes\3-hexo\layout\_partial\article.ejs:9    7|         &lt;span class=&quot;top&quot;&gt;&lt;a&gt;置顶&lt;/a&gt;&lt;/span&gt;    8|         &lt;%&amp;#125;%&gt; &gt;&gt; 9|         &lt;% if (theme.author.on==true &amp;&amp; post.author) &amp;#123;%&gt;    10|         &lt;span class=&quot;author&quot;&gt;&lt;a&gt;&lt;%=post.author %&gt;&lt;/a&gt;&lt;/span&gt;    11|         &lt;%&amp;#125;%&gt;    12|         &lt;% if (post.categories &amp;&amp; post.categories.length)&amp;#123; %&gt;Cannot read property &#39;on&#39; of undefined    at eval (E:\XiaoPanTongXue\themes\3-hexo\layout\_partial\article.ejs:31:25)    at article (E:\XiaoPanTongXue\node_modules\ejs\lib\ejs.js:682:17)    at _View._compiledSync (E:\XiaoPanTongXue\node_modules\hexo\lib\theme\view.js:132:24)    at _View.renderSync (E:\XiaoPanTongXue\node_modules\hexo\lib\theme\view.js:59:25)    at Object.partial (E:\XiaoPanTongXue\node_modules\hexo\lib\plugins\helper\partial.js:34:15)    at eval (E:\XiaoPanTongXue\themes\3-hexo\layout\post.ejs:36:17)    at post (E:\XiaoPanTongXue\node_modules\ejs\lib\ejs.js:682:17)    at _View._compiled (E:\XiaoPanTongXue\node_modules\hexo\lib\theme\view.js:136:50)    at _View.render (E:\XiaoPanTongXue\node_modules\hexo\lib\theme\view.js:39:17)    at E:\XiaoPanTongXue\node_modules\hexo\lib\hexo\index.js:64:21    at tryCatcher (E:\XiaoPanTongXue\node_modules\bluebird\js\release\util.js:16:23)    at E:\XiaoPanTongXue\node_modules\bluebird\js\release\method.js:15:34    at RouteStream._read (E:\XiaoPanTongXue\node_modules\hexo\lib\hexo\router.js:30:5)    at RouteStream.Readable.read (_stream_readable.js:467:10)    at resume_ (_stream_readable.js:981:12)    at processTicksAndRejections (internal/process/task_queues.js:84:21) &amp;#123;  path: &#39;E:\\XiaoPanTongXue\\themes\\3-hexo\\layout\\post.ejs&#39;&amp;#125;</code></pre><p>我之前把这个给注释掉了导致配置文件读取不到author了</p><pre><code>##########多作者模式############# author:  # on: false  # authors:    # author1: 阁主    # author2: 小马哥</code></pre><p>以为是解决原文（但不是，应该是作者的一个bug修复）：<a href="https://github.com/kaisawind/hexo-theme-3-hexo/commit/78ce963b18628b6955ae36d0def0d89982aea752">https://github.com/kaisawind/hexo-theme-3-hexo/commit/78ce963b18628b6955ae36d0def0d89982aea752</a> </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;欢迎━(&lt;em&gt;｀∀´&lt;/em&gt;)ノ亻!光临呐！&lt;/p&gt;
&lt;h1 id=&quot;下载安装node-js-cnpm-hexo&quot;&gt;&lt;a href=&quot;#下载安装node-js-cnpm-hexo&quot; class=&quot;headerlink&quot; title=&quot;下载安装node.js+cnpm+h</summary>
      
    
    
    
    <category term="其它" scheme="https://xiaopantongxue816.github.io/categories/%E5%85%B6%E5%AE%83/"/>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://xiaopantongxue816.github.io/2020/08/16/hello-world/"/>
    <id>https://xiaopantongxue816.github.io/2020/08/16/hello-world/</id>
    <published>2020-08-16T01:50:43.907Z</published>
    <updated>2020-09-09T08:57:09.728Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>. </p><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E:\XiaoPanTongXue&gt;hexo n&quot;我的新博客&quot;</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#启动本地hexo</span><br><span class="line">E:\XiaoPanTongXue&gt;hexo s</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#生成文件</span><br><span class="line">E:\XiaoPanTongXue&gt;hexo g</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#部署文件</span><br><span class="line">E:\XiaoPanTongXue&gt;hexo d</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h3 id="Clean"><a href="#Clean" class="headerlink" title="Clean"></a>Clean</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#清除文件</span><br><span class="line">E:\XiaoPanTongXue&gt;hexo c</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.i</summary>
      
    
    
    
    <category term="其它" scheme="https://xiaopantongxue816.github.io/categories/%E5%85%B6%E5%AE%83/"/>
    
    
  </entry>
  
</feed>
